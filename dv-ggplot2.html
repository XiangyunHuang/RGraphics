<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 12 章 数据可视化 | 数据科学与 R 语言</title>
  <meta name="description" content="数据操作、数据分析、数据建模、动态报告和数据可视化" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="第 12 章 数据可视化 | 数据科学与 R 语言" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bookdown.org/xiangyun/RGraphics/" />
  
  <meta property="og:description" content="数据操作、数据分析、数据建模、动态报告和数据可视化" />
  <meta name="github-repo" content="XiangyunHuang/RGraphics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 12 章 数据可视化 | 数据科学与 R 语言" />
  
  <meta name="twitter:description" content="数据操作、数据分析、数据建模、动态报告和数据可视化" />
  

<meta name="author" content="黄湘云" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dv-plot.html"/>
<link rel="next" href="dv-plot3d.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-8.0.0/css/motion.css" rel="stylesheet" />
<script src="libs/highcharts-8.0.0/highcharts.js"></script>
<script src="libs/highcharts-8.0.0/highcharts-3d.js"></script>
<script src="libs/highcharts-8.0.0/highcharts-more.js"></script>
<script src="libs/highcharts-8.0.0/modules/stock.js"></script>
<script src="libs/highcharts-8.0.0/modules/map.js"></script>
<script src="libs/highcharts-8.0.0/modules/annotations.js"></script>
<script src="libs/highcharts-8.0.0/modules/boost.js"></script>
<script src="libs/highcharts-8.0.0/modules/data.js"></script>
<script src="libs/highcharts-8.0.0/modules/drag-panes.js"></script>
<script src="libs/highcharts-8.0.0/modules/drilldown.js"></script>
<script src="libs/highcharts-8.0.0/modules/item-series.js"></script>
<script src="libs/highcharts-8.0.0/modules/offline-exporting.js"></script>
<script src="libs/highcharts-8.0.0/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-8.0.0/modules/exporting.js"></script>
<script src="libs/highcharts-8.0.0/modules/export-data.js"></script>
<script src="libs/highcharts-8.0.0/modules/funnel.js"></script>
<script src="libs/highcharts-8.0.0/modules/heatmap.js"></script>
<script src="libs/highcharts-8.0.0/modules/treemap.js"></script>
<script src="libs/highcharts-8.0.0/modules/sankey.js"></script>
<script src="libs/highcharts-8.0.0/modules/organization.js"></script>
<script src="libs/highcharts-8.0.0/modules/solid-gauge.js"></script>
<script src="libs/highcharts-8.0.0/modules/streamgraph.js"></script>
<script src="libs/highcharts-8.0.0/modules/sunburst.js"></script>
<script src="libs/highcharts-8.0.0/modules/vector.js"></script>
<script src="libs/highcharts-8.0.0/modules/wordcloud.js"></script>
<script src="libs/highcharts-8.0.0/modules/xrange.js"></script>
<script src="libs/highcharts-8.0.0/modules/tilemap.js"></script>
<script src="libs/highcharts-8.0.0/modules/venn.js"></script>
<script src="libs/highcharts-8.0.0/modules/gantt.js"></script>
<script src="libs/highcharts-8.0.0/modules/timeline.js"></script>
<script src="libs/highcharts-8.0.0/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-8.0.0/modules/bullet.js"></script>
<script src="libs/highcharts-8.0.0/modules/coloraxis.js"></script>
<script src="libs/highcharts-8.0.0/modules/dumbbell.js"></script>
<script src="libs/highcharts-8.0.0/plugins/motion.js"></script>
<script src="libs/highcharts-8.0.0/custom/reset.js"></script>
<script src="libs/highchart-binding-0.7.0.9001/highchart.js"></script>
<script src="libs/dagre-0.0.1/dagre.min.js"></script>
<script src="libs/lodash-3.7.0/lodash.js"></script>
<script src="libs/nomnoml-0.2.0/nomnoml.js"></script>
<script src="libs/nomnoml-binding-0.1.0.9001/nomnoml.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">数据可视化与R语言</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>欢迎</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i>Why R</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-read-this-book"><i class="fa fa-check"></i>目标读者</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#Getting-Help-with-R"><i class="fa fa-check"></i>获取帮助</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#history-of-r"><i class="fa fa-check"></i>发展历史</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions"><i class="fa fa-check"></i>记号约定</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#session-info"><i class="fa fa-check"></i>运行环境</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>前言</a><ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#what-talk-about"><i class="fa fa-check"></i>关于本书</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#structure-of-book"><i class="fa fa-check"></i>本书结构</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#about-author"><i class="fa fa-check"></i>关于作者</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>1</b> 安装与配置</a><ul>
<li class="chapter" data-level="1.1" data-path="setup.html"><a href="setup.html#repo-install"><i class="fa fa-check"></i><b>1.1</b> 仓库安装</a><ul>
<li class="chapter" data-level="1.1.1" data-path="setup.html"><a href="setup.html#ubuntu"><i class="fa fa-check"></i><b>1.1.1</b> Ubuntu</a></li>
<li class="chapter" data-level="1.1.2" data-path="setup.html"><a href="setup.html#centos"><i class="fa fa-check"></i><b>1.1.2</b> CentOS</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="setup.html"><a href="setup.html#source-install"><i class="fa fa-check"></i><b>1.2</b> 源码安装</a><ul>
<li class="chapter" data-level="1.2.1" data-path="setup.html"><a href="setup.html#ubuntu-1"><i class="fa fa-check"></i><b>1.2.1</b> Ubuntu</a></li>
<li class="chapter" data-level="1.2.2" data-path="setup.html"><a href="setup.html#centos-1"><i class="fa fa-check"></i><b>1.2.2</b> CentOS</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="setup.html"><a href="setup.html#ninja-install"><i class="fa fa-check"></i><b>1.3</b> 忍者安装</a></li>
<li class="chapter" data-level="1.4" data-path="setup.html"><a href="setup.html#settings"><i class="fa fa-check"></i><b>1.4</b> 配置</a><ul>
<li class="chapter" data-level="1.4.1" data-path="setup.html"><a href="setup.html#init-session"><i class="fa fa-check"></i><b>1.4.1</b> 初始会话 <code>.Rprofile</code></a></li>
<li class="chapter" data-level="1.4.2" data-path="setup.html"><a href="setup.html#environ-vars"><i class="fa fa-check"></i><b>1.4.2</b> 环境变量 <code>.Renviron</code></a></li>
<li class="chapter" data-level="1.4.3" data-path="setup.html"><a href="setup.html#make-vars"><i class="fa fa-check"></i><b>1.4.3</b> 编译选项 <code>Makevars</code></a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="setup.html"><a href="setup.html#command-line-arguments"><i class="fa fa-check"></i><b>1.5</b> 命令行参数</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>2</b> 文件管理员</a><ul>
<li class="chapter" data-level="2.1" data-path="files.html"><a href="files.html#list"><i class="fa fa-check"></i><b>2.1</b> 查看文件</a></li>
<li class="chapter" data-level="2.2" data-path="files.html"><a href="files.html#manipulation"><i class="fa fa-check"></i><b>2.2</b> 操作文件</a></li>
<li class="chapter" data-level="2.3" data-path="files.html"><a href="files.html#compression"><i class="fa fa-check"></i><b>2.3</b> 压缩文件</a></li>
<li class="chapter" data-level="2.4" data-path="files.html"><a href="files.html#paths"><i class="fa fa-check"></i><b>2.4</b> 路径操作</a></li>
<li class="chapter" data-level="2.5" data-path="files.html"><a href="files.html#find"><i class="fa fa-check"></i><b>2.5</b> 查找文件</a></li>
<li class="chapter" data-level="2.6" data-path="files.html"><a href="files.html#permissions"><i class="fa fa-check"></i><b>2.6</b> 文件权限</a></li>
<li class="chapter" data-level="2.7" data-path="files.html"><a href="files.html#locale"><i class="fa fa-check"></i><b>2.7</b> 区域设置</a></li>
<li class="chapter" data-level="2.8" data-path="files.html"><a href="files.html#process"><i class="fa fa-check"></i><b>2.8</b> 进程管理</a></li>
<li class="chapter" data-level="2.9" data-path="files.html"><a href="files.html#system-commands"><i class="fa fa-check"></i><b>2.9</b> 系统命令</a></li>
<li class="chapter" data-level="2.10" data-path="files.html"><a href="files.html#time"><i class="fa fa-check"></i><b>2.10</b> 时间管理</a></li>
<li class="chapter" data-level="2.11" data-path="files.html"><a href="files.html#package"><i class="fa fa-check"></i><b>2.11</b> R 包管理</a></li>
<li class="chapter" data-level="2.12" data-path="files.html"><a href="files.html#lookup-function"><i class="fa fa-check"></i><b>2.12</b> 查找函数</a></li>
<li class="chapter" data-level="2.13" data-path="files.html"><a href="files.html#files-session-info"><i class="fa fa-check"></i><b>2.13</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-objects.html"><a href="data-objects.html"><i class="fa fa-check"></i><b>3</b> 对象在哪里</a><ul>
<li class="chapter" data-level="3.1" data-path="data-objects.html"><a href="data-objects.html#subsec:typeof"><i class="fa fa-check"></i><b>3.1</b> 类型</a></li>
<li class="chapter" data-level="3.2" data-path="data-objects.html"><a href="data-objects.html#subsec:date-time"><i class="fa fa-check"></i><b>3.2</b> 日期</a></li>
<li class="chapter" data-level="3.3" data-path="data-objects.html"><a href="data-objects.html#subsec:null"><i class="fa fa-check"></i><b>3.3</b> 空值</a></li>
<li class="chapter" data-level="3.4" data-path="data-objects.html"><a href="data-objects.html#subsec:character"><i class="fa fa-check"></i><b>3.4</b> 字符串</a></li>
<li class="chapter" data-level="3.5" data-path="data-objects.html"><a href="data-objects.html#subsec:expression"><i class="fa fa-check"></i><b>3.5</b> 表达式</a></li>
<li class="chapter" data-level="3.6" data-path="data-objects.html"><a href="data-objects.html#oop-matrix"><i class="fa fa-check"></i><b>3.6</b> 矩阵</a></li>
<li class="chapter" data-level="3.7" data-path="data-objects.html"><a href="data-objects.html#oop-array"><i class="fa fa-check"></i><b>3.7</b> 数组</a></li>
<li class="chapter" data-level="3.8" data-path="data-objects.html"><a href="data-objects.html#oop-data.frame"><i class="fa fa-check"></i><b>3.8</b> 数据框</a></li>
<li class="chapter" data-level="3.9" data-path="data-objects.html"><a href="data-objects.html#oop-table"><i class="fa fa-check"></i><b>3.9</b> 表格</a></li>
<li class="chapter" data-level="3.10" data-path="data-objects.html"><a href="data-objects.html#oop-list"><i class="fa fa-check"></i><b>3.10</b> 列表</a></li>
<li class="chapter" data-level="3.11" data-path="data-objects.html"><a href="data-objects.html#oop-ts"><i class="fa fa-check"></i><b>3.11</b> 时间序列</a></li>
<li class="chapter" data-level="3.12" data-path="data-objects.html"><a href="data-objects.html#oop-sf"><i class="fa fa-check"></i><b>3.12</b> 空间数据</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>4</b> 数据搬运工</a><ul>
<li class="chapter" data-level="4.1" data-path="data-import.html"><a href="data-import.html#import-data"><i class="fa fa-check"></i><b>4.1</b> 导入数据</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-import.html"><a href="data-import.html#scan-file"><i class="fa fa-check"></i><b>4.1.1</b> <code>scan</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="data-import.html"><a href="data-import.html#read-write-table"><i class="fa fa-check"></i><b>4.1.2</b> <code>read.table</code></a></li>
<li class="chapter" data-level="4.1.3" data-path="data-import.html"><a href="data-import.html#read-write-lines"><i class="fa fa-check"></i><b>4.1.3</b> <code>readLines</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="data-import.html"><a href="data-import.html#read-save-rds"><i class="fa fa-check"></i><b>4.1.4</b> <code>readRDS</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-import.html"><a href="data-import.html#other-data-source"><i class="fa fa-check"></i><b>4.2</b> 其它数据格式</a></li>
<li class="chapter" data-level="4.3" data-path="data-import.html"><a href="data-import.html#import-large-dataset"><i class="fa fa-check"></i><b>4.3</b> 导入大数据集</a></li>
<li class="chapter" data-level="4.4" data-path="data-import.html"><a href="data-import.html#import-data-from-database"><i class="fa fa-check"></i><b>4.4</b> 从数据库导入</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-import.html"><a href="data-import.html#postgresql"><i class="fa fa-check"></i><b>4.4.1</b> PostgreSQL</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-import.html"><a href="data-import.html#mysql"><i class="fa fa-check"></i><b>4.4.2</b> MySQL</a></li>
<li class="chapter" data-level="4.4.3" data-path="data-import.html"><a href="data-import.html#spark"><i class="fa fa-check"></i><b>4.4.3</b> Spark</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-import.html"><a href="data-import.html#batch-import-data"><i class="fa fa-check"></i><b>4.5</b> 批量导入数据</a></li>
<li class="chapter" data-level="4.6" data-path="data-import.html"><a href="data-import.html#batch-export-data"><i class="fa fa-check"></i><b>4.6</b> 批量导出数据</a></li>
<li class="chapter" data-level="4.7" data-path="data-import.html"><a href="data-import.html#export-data"><i class="fa fa-check"></i><b>4.7</b> 导出数据</a><ul>
<li class="chapter" data-level="4.7.1" data-path="data-import.html"><a href="data-import.html#export-output"><i class="fa fa-check"></i><b>4.7.1</b> 导出运行结果</a></li>
<li class="chapter" data-level="4.7.2" data-path="data-import.html"><a href="data-import.html#export-data-object"><i class="fa fa-check"></i><b>4.7.2</b> 导出数据对象</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="data-import.html"><a href="data-import.html#dm-session-info"><i class="fa fa-check"></i><b>4.8</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-frame.html"><a href="data-frame.html"><i class="fa fa-check"></i><b>5</b> 数据操作手</a><ul>
<li class="chapter" data-level="5.1" data-path="data-frame.html"><a href="data-frame.html#show"><i class="fa fa-check"></i><b>5.1</b> 查看数据</a></li>
<li class="chapter" data-level="5.2" data-path="data-frame.html"><a href="data-frame.html#base-reshape"><i class="fa fa-check"></i><b>5.2</b> 数据变形</a></li>
<li class="chapter" data-level="5.3" data-path="data-frame.html"><a href="data-frame.html#base-transform"><i class="fa fa-check"></i><b>5.3</b> 数据转换</a></li>
<li class="chapter" data-level="5.4" data-path="data-frame.html"><a href="data-frame.html#base-subset"><i class="fa fa-check"></i><b>5.4</b> 提取子集</a></li>
<li class="chapter" data-level="5.5" data-path="data-frame.html"><a href="data-frame.html#base-order"><i class="fa fa-check"></i><b>5.5</b> 按列排序</a></li>
<li class="chapter" data-level="5.6" data-path="data-frame.html"><a href="data-frame.html#base-split"><i class="fa fa-check"></i><b>5.6</b> 数据拆分</a></li>
<li class="chapter" data-level="5.7" data-path="data-frame.html"><a href="data-frame.html#base-merge"><i class="fa fa-check"></i><b>5.7</b> 数据合并</a></li>
<li class="chapter" data-level="5.8" data-path="data-frame.html"><a href="data-frame.html#base-duplicated"><i class="fa fa-check"></i><b>5.8</b> 数据去重</a></li>
<li class="chapter" data-level="5.9" data-path="data-frame.html"><a href="data-frame.html#base-missing"><i class="fa fa-check"></i><b>5.9</b> 数据缺失</a></li>
<li class="chapter" data-level="5.10" data-path="data-frame.html"><a href="data-frame.html#base-aggregate"><i class="fa fa-check"></i><b>5.10</b> 数据聚合</a></li>
<li class="chapter" data-level="5.11" data-path="data-frame.html"><a href="data-frame.html#base-table"><i class="fa fa-check"></i><b>5.11</b> 表格统计</a></li>
<li class="chapter" data-level="5.12" data-path="data-frame.html"><a href="data-frame.html#base-index"><i class="fa fa-check"></i><b>5.12</b> 索引访问</a></li>
<li class="chapter" data-level="5.13" data-path="data-frame.html"><a href="data-frame.html#base-array"><i class="fa fa-check"></i><b>5.13</b> 多维数组</a></li>
<li class="chapter" data-level="5.14" data-path="data-frame.html"><a href="data-frame.html#base-others"><i class="fa fa-check"></i><b>5.14</b> 其它操作</a><ul>
<li class="chapter" data-level="5.14.1" data-path="data-frame.html"><a href="data-frame.html#relist-or-unlist"><i class="fa fa-check"></i><b>5.14.1</b> 列表属性</a></li>
<li class="chapter" data-level="5.14.2" data-path="data-frame.html"><a href="data-frame.html#stack-or-unstack"><i class="fa fa-check"></i><b>5.14.2</b> 堆叠向量</a></li>
<li class="chapter" data-level="5.14.3" data-path="data-frame.html"><a href="data-frame.html#class-or-unclass"><i class="fa fa-check"></i><b>5.14.3</b> 属性转化</a></li>
<li class="chapter" data-level="5.14.4" data-path="data-frame.html"><a href="data-frame.html#attach-or-detach"><i class="fa fa-check"></i><b>5.14.4</b> 绑定环境</a></li>
<li class="chapter" data-level="5.14.5" data-path="data-frame.html"><a href="data-frame.html#with-or-within"><i class="fa fa-check"></i><b>5.14.5</b> 数据环境</a></li>
</ul></li>
<li class="chapter" data-level="5.15" data-path="data-frame.html"><a href="data-frame.html#dm-base-session-info"><i class="fa fa-check"></i><b>5.15</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-tibble.html"><a href="data-tibble.html"><i class="fa fa-check"></i><b>6</b> 净土化操作</a><ul>
<li class="chapter" data-level="6.1" data-path="data-tibble.html"><a href="data-tibble.html#common-operations"><i class="fa fa-check"></i><b>6.1</b> 常用操作</a><ul>
<li class="chapter" data-level="6.1.1" data-path="data-tibble.html"><a href="data-tibble.html#tibble-show"><i class="fa fa-check"></i><b>6.1.1</b> 查看</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-tibble.html"><a href="data-tibble.html#dplyr-filter"><i class="fa fa-check"></i><b>6.1.2</b> 筛选</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-tibble.html"><a href="data-tibble.html#dplyr-arrange"><i class="fa fa-check"></i><b>6.1.3</b> 排序</a></li>
<li class="chapter" data-level="6.1.4" data-path="data-tibble.html"><a href="data-tibble.html#dplyr-summarise"><i class="fa fa-check"></i><b>6.1.4</b> 聚合</a></li>
<li class="chapter" data-level="6.1.5" data-path="data-tibble.html"><a href="data-tibble.html#dplyr-merge"><i class="fa fa-check"></i><b>6.1.5</b> 合并</a></li>
<li class="chapter" data-level="6.1.6" data-path="data-tibble.html"><a href="data-tibble.html#dplyr-mutate"><i class="fa fa-check"></i><b>6.1.6</b> 变换</a></li>
<li class="chapter" data-level="6.1.7" data-path="data-tibble.html"><a href="data-tibble.html#dplyr-duplicated"><i class="fa fa-check"></i><b>6.1.7</b> 去重</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-tibble.html"><a href="data-tibble.html#common-dataframe-operations"><i class="fa fa-check"></i><b>6.2</b> 高频问题</a><ul>
<li class="chapter" data-level="6.2.1" data-path="data-tibble.html"><a href="data-tibble.html#create-empty-dataframe"><i class="fa fa-check"></i><b>6.2.1</b> 初始化数据框</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-tibble.html"><a href="data-tibble.html#remove-missing-values"><i class="fa fa-check"></i><b>6.2.2</b> 移除缺失记录</a></li>
<li class="chapter" data-level="6.2.3" data-path="data-tibble.html"><a href="data-tibble.html#coerce-data-type"><i class="fa fa-check"></i><b>6.2.3</b> 数据类型转化</a></li>
<li class="chapter" data-level="6.2.4" data-path="data-tibble.html"><a href="data-tibble.html#cross-group-by"><i class="fa fa-check"></i><b>6.2.4</b> 跨列分组求和</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-tibble.html"><a href="data-tibble.html#pipe-manipulation"><i class="fa fa-check"></i><b>6.3</b> 管道操作</a></li>
<li class="chapter" data-level="6.4" data-path="data-tibble.html"><a href="data-tibble.html#dm-dplyr-rsession"><i class="fa fa-check"></i><b>6.4</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-table.html"><a href="data-table.html"><i class="fa fa-check"></i><b>7</b> 高级数据操作</a><ul>
<li class="chapter" data-level="7.1" data-path="data-table.html"><a href="data-table.html#subsec:select-j"><i class="fa fa-check"></i><b>7.1</b> 选择</a></li>
<li class="chapter" data-level="7.2" data-path="data-table.html"><a href="data-table.html#subsec:filter-i"><i class="fa fa-check"></i><b>7.2</b> 过滤</a></li>
<li class="chapter" data-level="7.3" data-path="data-table.html"><a href="data-table.html#subsec:mutate-j"><i class="fa fa-check"></i><b>7.3</b> 变换</a></li>
<li class="chapter" data-level="7.4" data-path="data-table.html"><a href="data-table.html#subsec:summarise-j"><i class="fa fa-check"></i><b>7.4</b> 聚合</a></li>
<li class="chapter" data-level="7.5" data-path="data-table.html"><a href="data-table.html#subsec:duplicated-i"><i class="fa fa-check"></i><b>7.5</b> 去重</a></li>
<li class="chapter" data-level="7.6" data-path="data-table.html"><a href="data-table.html#subsec:setname"><i class="fa fa-check"></i><b>7.6</b> 命名</a></li>
<li class="chapter" data-level="7.7" data-path="data-table.html"><a href="data-table.html#subsec:order-by-j"><i class="fa fa-check"></i><b>7.7</b> 排序</a></li>
<li class="chapter" data-level="7.8" data-path="data-table.html"><a href="data-table.html#subsec:reshape"><i class="fa fa-check"></i><b>7.8</b> 变形</a></li>
<li class="chapter" data-level="7.9" data-path="data-table.html"><a href="data-table.html#subsec:group-by"><i class="fa fa-check"></i><b>7.9</b> 分组</a></li>
<li class="chapter" data-level="7.10" data-path="data-table.html"><a href="data-table.html#subsec:merge"><i class="fa fa-check"></i><b>7.10</b> 合并</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-parallel.html"><a href="data-parallel.html"><i class="fa fa-check"></i><b>8</b> 并行化操作</a><ul>
<li class="chapter" data-level="8.1" data-path="data-parallel.html"><a href="data-parallel.html#apply"><i class="fa fa-check"></i><b>8.1</b> apply</a></li>
<li class="chapter" data-level="8.2" data-path="data-parallel.html"><a href="data-parallel.html#map-reduce"><i class="fa fa-check"></i><b>8.2</b> MapReduce</a></li>
<li class="chapter" data-level="8.3" data-path="data-parallel.html"><a href="data-parallel.html#parallel"><i class="fa fa-check"></i><b>8.3</b> parallel</a></li>
<li class="chapter" data-level="8.4" data-path="data-parallel.html"><a href="data-parallel.html#rmpi"><i class="fa fa-check"></i><b>8.4</b> Rmpi</a></li>
<li class="chapter" data-level="8.5" data-path="data-parallel.html"><a href="data-parallel.html#gpur"><i class="fa fa-check"></i><b>8.5</b> gpuR</a></li>
<li class="chapter" data-level="8.6" data-path="data-parallel.html"><a href="data-parallel.html#dm-parallel-session-info"><i class="fa fa-check"></i><b>8.6</b> 本章运行环境</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html"><i class="fa fa-check"></i><b>9</b> 字符串操作</a><ul>
<li class="chapter" data-level="9.1" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#base-count"><i class="fa fa-check"></i><b>9.1</b> 字符数统计</a></li>
<li class="chapter" data-level="9.2" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#base-translations"><i class="fa fa-check"></i><b>9.2</b> 字符串翻译</a></li>
<li class="chapter" data-level="9.3" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#base-concatenate"><i class="fa fa-check"></i><b>9.3</b> 字符串连接</a></li>
<li class="chapter" data-level="9.4" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#base-strsplit"><i class="fa fa-check"></i><b>9.4</b> 字符串拆分</a></li>
<li class="chapter" data-level="9.5" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#base-match"><i class="fa fa-check"></i><b>9.5</b> 字符串匹配</a></li>
<li class="chapter" data-level="9.6" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#base-search"><i class="fa fa-check"></i><b>9.6</b> 字符串查询</a></li>
<li class="chapter" data-level="9.7" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#base-replacement"><i class="fa fa-check"></i><b>9.7</b> 字符串替换</a></li>
<li class="chapter" data-level="9.8" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#base-extract"><i class="fa fa-check"></i><b>9.8</b> 字符串提取</a></li>
<li class="chapter" data-level="9.9" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#subsubsec:named-capture"><i class="fa fa-check"></i><b>9.9</b> 命名捕捉</a></li>
<li class="chapter" data-level="9.10" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#subsubsec:exact-match"><i class="fa fa-check"></i><b>9.10</b> 精确匹配</a></li>
<li class="chapter" data-level="9.11" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#subsubsec:fuzzy-match"><i class="fa fa-check"></i><b>9.11</b> 模糊匹配</a></li>
<li class="chapter" data-level="9.12" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#subsubsec:replace"><i class="fa fa-check"></i><b>9.12</b> 高级的替换</a></li>
<li class="chapter" data-level="9.13" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#subsubsec:extract"><i class="fa fa-check"></i><b>9.13</b> 高级的提取</a></li>
<li class="chapter" data-level="9.14" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#other-string-op"><i class="fa fa-check"></i><b>9.14</b> 其它操作</a><ul>
<li class="chapter" data-level="9.14.1" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#strwrap"><i class="fa fa-check"></i><b>9.14.1</b> strwrap</a></li>
<li class="chapter" data-level="9.14.2" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#strtrim"><i class="fa fa-check"></i><b>9.14.2</b> strtrim</a></li>
<li class="chapter" data-level="9.14.3" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#strrep"><i class="fa fa-check"></i><b>9.14.3</b> strrep</a></li>
<li class="chapter" data-level="9.14.4" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#trimws"><i class="fa fa-check"></i><b>9.14.4</b> trimws</a></li>
</ul></li>
<li class="chapter" data-level="9.15" data-path="dc-string-manipulation.html"><a href="dc-string-manipulation.html#string-session-info"><i class="fa fa-check"></i><b>9.15</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html"><i class="fa fa-check"></i><b>10</b> 正则表达式</a><ul>
<li class="chapter" data-level="10.1" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html#character-constants"><i class="fa fa-check"></i><b>10.1</b> 字符常量</a></li>
<li class="chapter" data-level="10.2" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html#environments"><i class="fa fa-check"></i><b>10.2</b> 软件环境</a></li>
<li class="chapter" data-level="10.3" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html#foundations"><i class="fa fa-check"></i><b>10.3</b> 基本概念</a></li>
<li class="chapter" data-level="10.4" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html#match"><i class="fa fa-check"></i><b>10.4</b> 字符串匹配</a></li>
<li class="chapter" data-level="10.5" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html#concatenation"><i class="fa fa-check"></i><b>10.5</b> 级联表达式</a></li>
<li class="chapter" data-level="10.6" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html#backreference"><i class="fa fa-check"></i><b>10.6</b> 反向引用</a></li>
<li class="chapter" data-level="10.7" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html#named-capture"><i class="fa fa-check"></i><b>10.7</b> 命名捕捉</a></li>
<li class="chapter" data-level="10.8" data-path="dc-regular-expressions.html"><a href="dc-regular-expressions.html#comment"><i class="fa fa-check"></i><b>10.8</b> 表达式注释</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dv-plot.html"><a href="dv-plot.html"><i class="fa fa-check"></i><b>11</b> 绘图素材库</a><ul>
<li class="chapter" data-level="11.1" data-path="dv-plot.html"><a href="dv-plot.html#elements"><i class="fa fa-check"></i><b>11.1</b> 基本要素</a><ul>
<li class="chapter" data-level="11.1.1" data-path="dv-plot.html"><a href="dv-plot.html#base-points"><i class="fa fa-check"></i><b>11.1.1</b> 点线</a></li>
<li class="chapter" data-level="11.1.2" data-path="dv-plot.html"><a href="dv-plot.html#base-rect"><i class="fa fa-check"></i><b>11.1.2</b> 区域</a></li>
<li class="chapter" data-level="11.1.3" data-path="dv-plot.html"><a href="dv-plot.html#base-lines"><i class="fa fa-check"></i><b>11.1.3</b> 参考线</a></li>
<li class="chapter" data-level="11.1.4" data-path="dv-plot.html"><a href="dv-plot.html#base-axis"><i class="fa fa-check"></i><b>11.1.4</b> 坐标轴</a></li>
<li class="chapter" data-level="11.1.5" data-path="dv-plot.html"><a href="dv-plot.html#base-tick"><i class="fa fa-check"></i><b>11.1.5</b> 刻度线</a></li>
<li class="chapter" data-level="11.1.6" data-path="dv-plot.html"><a href="dv-plot.html#base-title"><i class="fa fa-check"></i><b>11.1.6</b> 标题</a></li>
<li class="chapter" data-level="11.1.7" data-path="dv-plot.html"><a href="dv-plot.html#base-annotation"><i class="fa fa-check"></i><b>11.1.7</b> 注释</a></li>
<li class="chapter" data-level="11.1.8" data-path="dv-plot.html"><a href="dv-plot.html#base-legend"><i class="fa fa-check"></i><b>11.1.8</b> 图例</a></li>
<li class="chapter" data-level="11.1.9" data-path="dv-plot.html"><a href="dv-plot.html#base-par"><i class="fa fa-check"></i><b>11.1.9</b> 边空</a></li>
<li class="chapter" data-level="11.1.10" data-path="dv-plot.html"><a href="dv-plot.html#base-layer"><i class="fa fa-check"></i><b>11.1.10</b> 图层</a></li>
<li class="chapter" data-level="11.1.11" data-path="dv-plot.html"><a href="dv-plot.html#base-layout"><i class="fa fa-check"></i><b>11.1.11</b> 布局</a></li>
<li class="chapter" data-level="11.1.12" data-path="dv-plot.html"><a href="dv-plot.html#base-combine"><i class="fa fa-check"></i><b>11.1.12</b> 组合</a></li>
<li class="chapter" data-level="11.1.13" data-path="dv-plot.html"><a href="dv-plot.html#base-screen"><i class="fa fa-check"></i><b>11.1.13</b> 分屏</a></li>
<li class="chapter" data-level="11.1.14" data-path="dv-plot.html"><a href="dv-plot.html#identify-locator"><i class="fa fa-check"></i><b>11.1.14</b> 交互</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="dv-plot.html"><a href="dv-plot.html#plot-gallary"><i class="fa fa-check"></i><b>11.2</b> 统计图形</a><ul>
<li class="chapter" data-level="11.2.1" data-path="dv-plot.html"><a href="dv-plot.html#plot-bar"><i class="fa fa-check"></i><b>11.2.1</b> 条形图</a></li>
<li class="chapter" data-level="11.2.2" data-path="dv-plot.html"><a href="dv-plot.html#plot-hist"><i class="fa fa-check"></i><b>11.2.2</b> 直方图</a></li>
<li class="chapter" data-level="11.2.3" data-path="dv-plot.html"><a href="dv-plot.html#plot-density"><i class="fa fa-check"></i><b>11.2.3</b> 密度图</a></li>
<li class="chapter" data-level="11.2.4" data-path="dv-plot.html"><a href="dv-plot.html#plot-ecdf"><i class="fa fa-check"></i><b>11.2.4</b> 经验图</a></li>
<li class="chapter" data-level="11.2.5" data-path="dv-plot.html"><a href="dv-plot.html#plot-qqnorm"><i class="fa fa-check"></i><b>11.2.5</b> QQ 图</a></li>
<li class="chapter" data-level="11.2.6" data-path="dv-plot.html"><a href="dv-plot.html#plot-ts"><i class="fa fa-check"></i><b>11.2.6</b> 时序图</a></li>
<li class="chapter" data-level="11.2.7" data-path="dv-plot.html"><a href="dv-plot.html#plot-pie"><i class="fa fa-check"></i><b>11.2.7</b> 饼图</a></li>
<li class="chapter" data-level="11.2.8" data-path="dv-plot.html"><a href="dv-plot.html#plot-stem-leaf"><i class="fa fa-check"></i><b>11.2.8</b> 茎叶图</a></li>
<li class="chapter" data-level="11.2.9" data-path="dv-plot.html"><a href="dv-plot.html#plot-scatter"><i class="fa fa-check"></i><b>11.2.9</b> 散点图</a></li>
<li class="chapter" data-level="11.2.10" data-path="dv-plot.html"><a href="dv-plot.html#base-jitter"><i class="fa fa-check"></i><b>11.2.10</b> 抖动图</a></li>
<li class="chapter" data-level="11.2.11" data-path="dv-plot.html"><a href="dv-plot.html#plot-box"><i class="fa fa-check"></i><b>11.2.11</b> 箱线图</a></li>
<li class="chapter" data-level="11.2.12" data-path="dv-plot.html"><a href="dv-plot.html#error-bars"><i class="fa fa-check"></i><b>11.2.12</b> 残差图</a></li>
<li class="chapter" data-level="11.2.13" data-path="dv-plot.html"><a href="dv-plot.html#plot-violin"><i class="fa fa-check"></i><b>11.2.13</b> 提琴图</a></li>
<li class="chapter" data-level="11.2.14" data-path="dv-plot.html"><a href="dv-plot.html#plot-contour"><i class="fa fa-check"></i><b>11.2.14</b> 轮廓图</a></li>
<li class="chapter" data-level="11.2.15" data-path="dv-plot.html"><a href="dv-plot.html#plot-line"><i class="fa fa-check"></i><b>11.2.15</b> 折线图</a></li>
<li class="chapter" data-level="11.2.16" data-path="dv-plot.html"><a href="dv-plot.html#function"><i class="fa fa-check"></i><b>11.2.16</b> 函数图</a></li>
<li class="chapter" data-level="11.2.17" data-path="dv-plot.html"><a href="dv-plot.html#plot-mosaic"><i class="fa fa-check"></i><b>11.2.17</b> 马赛克图</a></li>
<li class="chapter" data-level="11.2.18" data-path="dv-plot.html"><a href="dv-plot.html#plot-dotchart"><i class="fa fa-check"></i><b>11.2.18</b> 克利夫兰点图</a></li>
<li class="chapter" data-level="11.2.19" data-path="dv-plot.html"><a href="dv-plot.html#plot-matrix"><i class="fa fa-check"></i><b>11.2.19</b> 矩阵图</a></li>
<li class="chapter" data-level="11.2.20" data-path="dv-plot.html"><a href="dv-plot.html#plot-radar"><i class="fa fa-check"></i><b>11.2.20</b> 雷达图</a></li>
<li class="chapter" data-level="11.2.21" data-path="dv-plot.html"><a href="dv-plot.html#plot-rose"><i class="fa fa-check"></i><b>11.2.21</b> 玫瑰图</a></li>
<li class="chapter" data-level="11.2.22" data-path="dv-plot.html"><a href="dv-plot.html#plot-map"><i class="fa fa-check"></i><b>11.2.22</b> 地形图</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="dv-plot.html"><a href="dv-plot.html#plot-session-info"><i class="fa fa-check"></i><b>11.3</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html"><i class="fa fa-check"></i><b>12</b> 数据可视化</a><ul>
<li class="chapter" data-level="12.1" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#intro-ggplot2"><i class="fa fa-check"></i><b>12.1</b> 基础语法</a><ul>
<li class="chapter" data-level="12.1.1" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-layer"><i class="fa fa-check"></i><b>12.1.1</b> 图层</a></li>
<li class="chapter" data-level="12.1.2" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-theme"><i class="fa fa-check"></i><b>12.1.2</b> 主题</a></li>
<li class="chapter" data-level="12.1.3" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-color"><i class="fa fa-check"></i><b>12.1.3</b> 配色</a></li>
<li class="chapter" data-level="12.1.4" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-scale"><i class="fa fa-check"></i><b>12.1.4</b> 刻度</a></li>
<li class="chapter" data-level="12.1.5" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-annotate"><i class="fa fa-check"></i><b>12.1.5</b> 注释</a></li>
<li class="chapter" data-level="12.1.6" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-legend"><i class="fa fa-check"></i><b>12.1.6</b> 图例</a></li>
<li class="chapter" data-level="12.1.7" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-grid"><i class="fa fa-check"></i><b>12.1.7</b> 组合</a></li>
<li class="chapter" data-level="12.1.8" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-coord"><i class="fa fa-check"></i><b>12.1.8</b> 坐标系</a></li>
<li class="chapter" data-level="12.1.9" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-axes"><i class="fa fa-check"></i><b>12.1.9</b> 坐标轴</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-gallary"><i class="fa fa-check"></i><b>12.2</b> 统计图形</a><ul>
<li class="chapter" data-level="12.2.1" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-scatter"><i class="fa fa-check"></i><b>12.2.1</b> 散点图</a></li>
<li class="chapter" data-level="12.2.2" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-boxplot"><i class="fa fa-check"></i><b>12.2.2</b> 箱线图</a></li>
<li class="chapter" data-level="12.2.3" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-barplot"><i class="fa fa-check"></i><b>12.2.3</b> 条形图</a></li>
<li class="chapter" data-level="12.2.4" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-line"><i class="fa fa-check"></i><b>12.2.4</b> 折线图</a></li>
<li class="chapter" data-level="12.2.5" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-histogram"><i class="fa fa-check"></i><b>12.2.5</b> 直方图</a></li>
<li class="chapter" data-level="12.2.6" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-violin"><i class="fa fa-check"></i><b>12.2.6</b> 提琴图</a></li>
<li class="chapter" data-level="12.2.7" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-jitter"><i class="fa fa-check"></i><b>12.2.7</b> 抖动图</a></li>
<li class="chapter" data-level="12.2.8" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-ridge"><i class="fa fa-check"></i><b>12.2.8</b> 密度图</a></li>
<li class="chapter" data-level="12.2.9" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-rose"><i class="fa fa-check"></i><b>12.2.9</b> 玫瑰图</a></li>
<li class="chapter" data-level="12.2.10" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-wordcloud"><i class="fa fa-check"></i><b>12.2.10</b> 词云图</a></li>
<li class="chapter" data-level="12.2.11" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#calendar-map"><i class="fa fa-check"></i><b>12.2.11</b> 日历图</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="dv-ggplot2.html"><a href="dv-ggplot2.html#ggplot2-session-info"><i class="fa fa-check"></i><b>12.3</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="dv-plot3d.html"><a href="dv-plot3d.html"><i class="fa fa-check"></i><b>13</b> 三维可视化</a><ul>
<li class="chapter" data-level="13.1" data-path="dv-plot3d.html"><a href="dv-plot3d.html#pie-3d"><i class="fa fa-check"></i><b>13.1</b> 饼图</a></li>
<li class="chapter" data-level="13.2" data-path="dv-plot3d.html"><a href="dv-plot3d.html#bar-3d"><i class="fa fa-check"></i><b>13.2</b> 柱形图</a></li>
<li class="chapter" data-level="13.3" data-path="dv-plot3d.html"><a href="dv-plot3d.html#scatter-3d"><i class="fa fa-check"></i><b>13.3</b> 散点图</a></li>
<li class="chapter" data-level="13.4" data-path="dv-plot3d.html"><a href="dv-plot3d.html#curve-3d"><i class="fa fa-check"></i><b>13.4</b> 函数图</a></li>
<li class="chapter" data-level="13.5" data-path="dv-plot3d.html"><a href="dv-plot3d.html#persp-3d"><i class="fa fa-check"></i><b>13.5</b> 透视图</a></li>
<li class="chapter" data-level="13.6" data-path="dv-plot3d.html"><a href="dv-plot3d.html#tikz"><i class="fa fa-check"></i><b>13.6</b> TikZ 绘图</a></li>
<li class="chapter" data-level="13.7" data-path="dv-plot3d.html"><a href="dv-plot3d.html#export-save"><i class="fa fa-check"></i><b>13.7</b> 图形导出</a></li>
<li class="chapter" data-level="13.8" data-path="dv-plot3d.html"><a href="dv-plot3d.html#plot3d-sessionInfo"><i class="fa fa-check"></i><b>13.8</b> 软件信息</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="dv-colors-fonts.html"><a href="dv-colors-fonts.html"><i class="fa fa-check"></i><b>14</b> 色彩与字体</a><ul>
<li class="chapter" data-level="14.1" data-path="dv-colors-fonts.html"><a href="dv-colors-fonts.html#colors-in-r"><i class="fa fa-check"></i><b>14.1</b> 颜色</a></li>
<li class="chapter" data-level="14.2" data-path="dv-colors-fonts.html"><a href="dv-colors-fonts.html#choose-colors"><i class="fa fa-check"></i><b>14.2</b> 配色</a><ul>
<li class="chapter" data-level="14.2.1" data-path="dv-colors-fonts.html"><a href="dv-colors-fonts.html#colourlovers"><i class="fa fa-check"></i><b>14.2.1</b> colourlovers</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="dv-colors-fonts.html"><a href="dv-colors-fonts.html#fonts"><i class="fa fa-check"></i><b>14.3</b> 字体</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="dv-highcharter.html"><a href="dv-highcharter.html"><i class="fa fa-check"></i><b>15</b> highcharter 图形</a><ul>
<li class="chapter" data-level="15.1" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-line"><i class="fa fa-check"></i><b>15.1</b> 折线图</a><ul>
<li class="chapter" data-level="15.1.1" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:simple-hc-line"><i class="fa fa-check"></i><b>15.1.1</b> 简单折线图</a></li>
<li class="chapter" data-level="15.1.2" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:group-hc-line"><i class="fa fa-check"></i><b>15.1.2</b> 分组折线图</a></li>
<li class="chapter" data-level="15.1.3" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:ts-hc-line"><i class="fa fa-check"></i><b>15.1.3</b> 时间序列图</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-scatter"><i class="fa fa-check"></i><b>15.2</b> 散点图</a><ul>
<li class="chapter" data-level="15.2.1" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:simple-hc-scatter"><i class="fa fa-check"></i><b>15.2.1</b> 简单散点图</a></li>
<li class="chapter" data-level="15.2.2" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:group-hc-scatter"><i class="fa fa-check"></i><b>15.2.2</b> 分组散点图</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-bar"><i class="fa fa-check"></i><b>15.3</b> 条形图</a><ul>
<li class="chapter" data-level="15.3.1" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:simple-hc-bar"><i class="fa fa-check"></i><b>15.3.1</b> 简单条形图</a></li>
<li class="chapter" data-level="15.3.2" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:dodge-hc-bar"><i class="fa fa-check"></i><b>15.3.2</b> 复合条形图</a></li>
<li class="chapter" data-level="15.3.3" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:stack-hc-bar"><i class="fa fa-check"></i><b>15.3.3</b> 堆积条形图</a></li>
<li class="chapter" data-level="15.3.4" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:fill-hc-bar"><i class="fa fa-check"></i><b>15.3.4</b> 百分比条形图</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-boxplot"><i class="fa fa-check"></i><b>15.4</b> 箱线图</a><ul>
<li class="chapter" data-level="15.4.1" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsubsec:simple-hc-boxplot"><i class="fa fa-check"></i><b>15.4.1</b> 简单箱线图</a></li>
<li class="chapter" data-level="15.4.2" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subssubsec:dodge-hc-boxplot"><i class="fa fa-check"></i><b>15.4.2</b> 复合箱线图</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-density"><i class="fa fa-check"></i><b>15.5</b> 密度图</a></li>
<li class="chapter" data-level="15.6" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-hist"><i class="fa fa-check"></i><b>15.6</b> 直方图</a></li>
<li class="chapter" data-level="15.7" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-survival"><i class="fa fa-check"></i><b>15.7</b> 生存图</a></li>
<li class="chapter" data-level="15.8" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-heatmap"><i class="fa fa-check"></i><b>15.8</b> 等高图</a></li>
<li class="chapter" data-level="15.9" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-corrplot"><i class="fa fa-check"></i><b>15.9</b> 相关图</a></li>
<li class="chapter" data-level="15.10" data-path="dv-highcharter.html"><a href="dv-highcharter.html#subsec:hc-treemap"><i class="fa fa-check"></i><b>15.10</b> 矩阵图</a></li>
<li class="chapter" data-level="15.11" data-path="dv-highcharter.html"><a href="dv-highcharter.html#highcharter-map"><i class="fa fa-check"></i><b>15.11</b> 地图</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="dv-lattice.html"><a href="dv-lattice.html"><i class="fa fa-check"></i><b>16</b> Lattice 图形</a><ul>
<li class="chapter" data-level="16.1" data-path="dv-lattice.html"><a href="dv-lattice.html#sec:boxplot"><i class="fa fa-check"></i><b>16.1</b> 箱线图</a></li>
<li class="chapter" data-level="16.2" data-path="dv-lattice.html"><a href="dv-lattice.html#sec:line"><i class="fa fa-check"></i><b>16.2</b> 折线图</a></li>
<li class="chapter" data-level="16.3" data-path="dv-lattice.html"><a href="dv-lattice.html#sec:smooth"><i class="fa fa-check"></i><b>16.3</b> 平滑图</a></li>
<li class="chapter" data-level="16.4" data-path="dv-lattice.html"><a href="dv-lattice.html#sec:dotplot"><i class="fa fa-check"></i><b>16.4</b> 点图</a></li>
<li class="chapter" data-level="16.5" data-path="dv-lattice.html"><a href="dv-lattice.html#sec:step"><i class="fa fa-check"></i><b>16.5</b> 阶梯图</a></li>
<li class="chapter" data-level="16.6" data-path="dv-lattice.html"><a href="dv-lattice.html#sec:facet"><i class="fa fa-check"></i><b>16.6</b> 分面图</a></li>
<li class="chapter" data-level="16.7" data-path="dv-lattice.html"><a href="dv-lattice.html#sec:contour"><i class="fa fa-check"></i><b>16.7</b> 等高线图</a></li>
<li class="chapter" data-level="16.8" data-path="dv-lattice.html"><a href="dv-lattice.html#sub:map"><i class="fa fa-check"></i><b>16.8</b> 地图</a></li>
<li class="chapter" data-level="16.9" data-path="dv-lattice.html"><a href="dv-lattice.html#sub:cluster"><i class="fa fa-check"></i><b>16.9</b> 聚类图</a></li>
<li class="chapter" data-level="16.10" data-path="dv-lattice.html"><a href="dv-lattice.html#sec:lattice-sessioninfo"><i class="fa fa-check"></i><b>16.10</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="dv-network.html"><a href="dv-network.html"><i class="fa fa-check"></i><b>17</b> 网络数据</a></li>
<li class="chapter" data-level="18" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html"><i class="fa fa-check"></i><b>18</b> 时空可视化</a><ul>
<li class="chapter" data-level="18.1" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#map"><i class="fa fa-check"></i><b>18.1</b> 地图</a><ul>
<li class="chapter" data-level="18.1.1" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#project-orientation"><i class="fa fa-check"></i><b>18.1.1</b> 投影和观察方位</a></li>
<li class="chapter" data-level="18.1.2" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#USA-crime-rates"><i class="fa fa-check"></i><b>18.1.2</b> 美国各州犯罪率</a></li>
<li class="chapter" data-level="18.1.3" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#fiji-earthquake-map"><i class="fa fa-check"></i><b>18.1.3</b> 斐济地震带</a></li>
<li class="chapter" data-level="18.1.4" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#USA-unemployment-ratio"><i class="fa fa-check"></i><b>18.1.4</b> 美国各城镇失业率</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#spatial-op"><i class="fa fa-check"></i><b>18.2</b> 空间数据对象</a><ul>
<li class="chapter" data-level="18.2.1" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#ggplot2-sp"><i class="fa fa-check"></i><b>18.2.1</b> sp</a></li>
<li class="chapter" data-level="18.2.2" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#ggplot2-raster"><i class="fa fa-check"></i><b>18.2.2</b> raster</a></li>
<li class="chapter" data-level="18.2.3" data-path="dv-spatio-temporal.html"><a href="dv-spatio-temporal.html#ggplot2-sf"><i class="fa fa-check"></i><b>18.2.3</b> sf</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="dynamic-documents.html"><a href="dynamic-documents.html"><i class="fa fa-check"></i><b>19</b> 动态性文档</a><ul>
<li class="chapter" data-level="" data-path="dynamic-documents.html"><a href="dynamic-documents.html#r-call-python"><i class="fa fa-check"></i>R 调用 Python</a></li>
<li class="chapter" data-level="19.1" data-path="dynamic-documents.html"><a href="dynamic-documents.html#markdown"><i class="fa fa-check"></i><b>19.1</b> Markdown</a><ul>
<li class="chapter" data-level="19.1.1" data-path="dynamic-documents.html"><a href="dynamic-documents.html#markdown-list"><i class="fa fa-check"></i><b>19.1.1</b> 列表</a></li>
<li class="chapter" data-level="19.1.2" data-path="dynamic-documents.html"><a href="dynamic-documents.html#markdown-emphasis"><i class="fa fa-check"></i><b>19.1.2</b> 强调</a></li>
<li class="chapter" data-level="19.1.3" data-path="dynamic-documents.html"><a href="dynamic-documents.html#markdown-quote"><i class="fa fa-check"></i><b>19.1.3</b> 引用</a></li>
<li class="chapter" data-level="19.1.4" data-path="dynamic-documents.html"><a href="dynamic-documents.html#markdown-table"><i class="fa fa-check"></i><b>19.1.4</b> 表格</a></li>
<li class="chapter" data-level="19.1.5" data-path="dynamic-documents.html"><a href="dynamic-documents.html#image"><i class="fa fa-check"></i><b>19.1.5</b> 图片</a></li>
<li class="chapter" data-level="19.1.6" data-path="dynamic-documents.html"><a href="dynamic-documents.html#markdown-math"><i class="fa fa-check"></i><b>19.1.6</b> 公式</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="dynamic-documents.html"><a href="dynamic-documents.html#pandoc-markdown"><i class="fa fa-check"></i><b>19.2</b> Pandoc’s Markdown</a></li>
<li class="chapter" data-level="19.3" data-path="dynamic-documents.html"><a href="dynamic-documents.html#r-markdown"><i class="fa fa-check"></i><b>19.3</b> R Markdown</a><ul>
<li class="chapter" data-level="19.3.1" data-path="dynamic-documents.html"><a href="dynamic-documents.html#语法高亮"><i class="fa fa-check"></i><b>19.3.1</b> 语法高亮</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="dynamic-documents.html"><a href="dynamic-documents.html#table-style"><i class="fa fa-check"></i><b>19.4</b> 表格样式</a><ul>
<li class="chapter" data-level="19.4.1" data-path="dynamic-documents.html"><a href="dynamic-documents.html#table-html"><i class="fa fa-check"></i><b>19.4.1</b> HTML 样式</a></li>
<li class="chapter" data-level="19.4.2" data-path="dynamic-documents.html"><a href="dynamic-documents.html#table-latex"><i class="fa fa-check"></i><b>19.4.2</b> LaTeX 样式</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="dynamic-documents.html"><a href="dynamic-documents.html#rmarkdown-addins"><i class="fa fa-check"></i><b>19.5</b> 插件</a></li>
<li class="chapter" data-level="19.6" data-path="dynamic-documents.html"><a href="dynamic-documents.html#subsec:rmarkdown"><i class="fa fa-check"></i><b>19.6</b> 报告</a></li>
<li class="chapter" data-level="19.7" data-path="dynamic-documents.html"><a href="dynamic-documents.html#subsec:pagedown"><i class="fa fa-check"></i><b>19.7</b> 简历</a></li>
<li class="chapter" data-level="19.8" data-path="dynamic-documents.html"><a href="dynamic-documents.html#subsec:bookdown"><i class="fa fa-check"></i><b>19.8</b> 书籍</a></li>
<li class="chapter" data-level="19.9" data-path="dynamic-documents.html"><a href="dynamic-documents.html#subsec:blogdown"><i class="fa fa-check"></i><b>19.9</b> 网站</a></li>
<li class="chapter" data-level="19.10" data-path="dynamic-documents.html"><a href="dynamic-documents.html#subsec:dashboard"><i class="fa fa-check"></i><b>19.10</b> Shiny</a></li>
<li class="chapter" data-level="19.11" data-path="dynamic-documents.html"><a href="dynamic-documents.html#subsec:xaringan"><i class="fa fa-check"></i><b>19.11</b> 幻灯片</a></li>
<li class="chapter" data-level="19.12" data-path="dynamic-documents.html"><a href="dynamic-documents.html#sec:animation-video"><i class="fa fa-check"></i><b>19.12</b> 动画视频</a></li>
<li class="chapter" data-level="19.13" data-path="dynamic-documents.html"><a href="dynamic-documents.html#sec:diagram-table"><i class="fa fa-check"></i><b>19.13</b> 图表</a><ul>
<li class="chapter" data-level="19.13.1" data-path="dynamic-documents.html"><a href="dynamic-documents.html#tikz-1"><i class="fa fa-check"></i><b>19.13.1</b> TikZ</a></li>
<li class="chapter" data-level="19.13.2" data-path="dynamic-documents.html"><a href="dynamic-documents.html#dot"><i class="fa fa-check"></i><b>19.13.2</b> DOT</a></li>
<li class="chapter" data-level="19.13.3" data-path="dynamic-documents.html"><a href="dynamic-documents.html#subsec:uml"><i class="fa fa-check"></i><b>19.13.3</b> UML</a></li>
<li class="chapter" data-level="19.13.4" data-path="dynamic-documents.html"><a href="dynamic-documents.html#subsec:table"><i class="fa fa-check"></i><b>19.13.4</b> 表格</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="interactive-graphics.html"><a href="interactive-graphics.html"><i class="fa fa-check"></i><b>20</b> 交互式图形</a><ul>
<li class="chapter" data-level="20.1" data-path="interactive-graphics.html"><a href="interactive-graphics.html#rgl"><i class="fa fa-check"></i><b>20.1</b> rgl</a></li>
<li class="chapter" data-level="20.2" data-path="interactive-graphics.html"><a href="interactive-graphics.html#leaflet"><i class="fa fa-check"></i><b>20.2</b> leaflet</a></li>
<li class="chapter" data-level="20.3" data-path="interactive-graphics.html"><a href="interactive-graphics.html#vegawidget"><i class="fa fa-check"></i><b>20.3</b> vegawidget</a></li>
<li class="chapter" data-level="20.4" data-path="interactive-graphics.html"><a href="interactive-graphics.html#network"><i class="fa fa-check"></i><b>20.4</b> 网络图</a></li>
<li class="chapter" data-level="20.5" data-path="interactive-graphics.html"><a href="interactive-graphics.html#threejs"><i class="fa fa-check"></i><b>20.5</b> threejs</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="cs-cran-network.html"><a href="cs-cran-network.html"><i class="fa fa-check"></i><b>21</b> 案例：分析 CRAN</a><ul>
<li class="chapter" data-level="21.1" data-path="cs-cran-network.html"><a href="cs-cran-network.html#R-Core-Team"><i class="fa fa-check"></i><b>21.1</b> R 核心团队</a></li>
<li class="chapter" data-level="21.2" data-path="cs-cran-network.html"><a href="cs-cran-network.html#Top-Creators"><i class="fa fa-check"></i><b>21.2</b> 高产的开发者</a></li>
<li class="chapter" data-level="21.3" data-path="cs-cran-network.html"><a href="cs-cran-network.html#R-Package-Developers"><i class="fa fa-check"></i><b>21.3</b> 社区开发者</a></li>
<li class="chapter" data-level="21.4" data-path="cs-cran-network.html"><a href="cs-cran-network.html#first-commit"><i class="fa fa-check"></i><b>21.4</b> 首次贡献 R 包</a></li>
<li class="chapter" data-level="21.5" data-path="cs-cran-network.html"><a href="cs-cran-network.html#Contribution-Network"><i class="fa fa-check"></i><b>21.5</b> 贡献关系网络</a></li>
<li class="chapter" data-level="21.6" data-path="cs-cran-network.html"><a href="cs-cran-network.html#CRAN-Update-Packages"><i class="fa fa-check"></i><b>21.6</b> 更新知多少</a></li>
<li class="chapter" data-level="21.7" data-path="cs-cran-network.html"><a href="cs-cran-network.html#Package-Licenses"><i class="fa fa-check"></i><b>21.7</b> 使用许可证</a></li>
<li class="chapter" data-level="21.8" data-path="cs-cran-network.html"><a href="cs-cran-network.html#r-包增长速度"><i class="fa fa-check"></i><b>21.8</b> R 包增长速度</a></li>
<li class="chapter" data-level="21.9" data-path="cs-cran-network.html"><a href="cs-cran-network.html#Choose-Package"><i class="fa fa-check"></i><b>21.9</b> 选择 R 包</a></li>
<li class="chapter" data-level="21.10" data-path="cs-cran-network.html"><a href="cs-cran-network.html#cs-network-session-info"><i class="fa fa-check"></i><b>21.10</b> 运行环境</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="99-references.html"><a href="99-references.html"><i class="fa fa-check"></i>参考文献</a></li>
<li class="divider"></li>
<li><a href="https://r-graphics.netlify.com/" target="blank">Published with netlify</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">数据科学与 R 语言</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2-visualization" class="section level1">
<h1><span class="header-section-number">第 12 章</span> 数据可视化</h1>
<blockquote>
<p>3-D bar plots are an abomination. Just because Excel can do them doesn’t mean you should. (Dismount pulpit).</p>
<p>— Berton Gunter<a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a></p>
</blockquote>
<p>grid graphics lattice 和 ggplot2 之间的历史发展关系脉络</p>
<p>gganimate 只是一个扩展，并不是新的东西，因为它是静态图形转化为帧，然后借助第三方工具合成</p>
<p>ggplot2 生态系统 <a href="dv-ggplot2.html#tab:ggplot2-eco">12.1</a></p>
<table>
<caption><span id="tab:ggplot2-eco">表 12.1: </span>ggplot2 生态系统</caption>
<thead>
<tr class="header">
<th align="left">Package</th>
<th align="left">Title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>gg.gap</strong></td>
<td align="left">Define Segments in y-Axis for ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggallin</strong></td>
<td align="left">Grab Bag of ggplot2 Functions</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggalluvial</strong></td>
<td align="left">Alluvial Plots in ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggalt</strong></td>
<td align="left">Extra Coordinate Systems, Geoms, Statistical Transformations, Scales and Fonts for ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggamma</strong></td>
<td align="left">Generalized Gamma Probability Distribution</td>
</tr>
<tr class="even">
<td align="left"><strong>gganimate</strong></td>
<td align="left">A Grammar of Animated Graphics</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggasym</strong></td>
<td align="left">Asymmetric Matrix Plotting in ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggbeeswarm</strong></td>
<td align="left">Categorical Scatter (Violin Point) Plots</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggBubbles</strong></td>
<td align="left">Mini Bubble Plots for Comparison of Discrete Data with ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggbuildr</strong></td>
<td align="left">Save Incremental Builds of Plots</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggChernoff</strong></td>
<td align="left">Chernoff Faces for ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggconf</strong></td>
<td align="left">Simpler Appearance Modification of ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggcorrplot</strong></td>
<td align="left">Visualization of a Correlation Matrix using ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggdag</strong></td>
<td align="left">Analyze and Create Elegant Directed Acyclic Graphs</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggdark</strong></td>
<td align="left">Dark Mode for ggplot2 Themes</td>
</tr>
<tr class="even">
<td align="left"><strong>ggdemetra</strong></td>
<td align="left">ggplot2 Extension for Seasonal and Trading Day Adjustment with RJDemetra</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggdendro</strong></td>
<td align="left">Create Dendrograms and Tree Diagrams Using ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggdistribute</strong></td>
<td align="left">A ggplot2 Extension for Plotting Unimodal Distributions</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggdmc</strong></td>
<td align="left">Cognitive Models</td>
</tr>
<tr class="even">
<td align="left"><strong>gge</strong></td>
<td align="left">Genotype Plus Genotype-by-Environment Biplots</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggeasy</strong></td>
<td align="left">Easy Access to ggplot2 Commands</td>
</tr>
<tr class="even">
<td align="left"><strong>ggedit</strong></td>
<td align="left">Interactive ggplot2 Layer and Theme Aesthetic Editor</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggeffects</strong></td>
<td align="left">Create Tidy Data Frames of Marginal Effects for ggplot from Model Outputs</td>
</tr>
<tr class="even">
<td align="left"><strong>ggenealogy</strong></td>
<td align="left">Visualization Tools for Genealogical Data</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggetho</strong></td>
<td align="left">Visualisation of High-Throughput Behavioural (i.e. Ethomics) Data</td>
</tr>
<tr class="even">
<td align="left"><strong>ggExtra</strong></td>
<td align="left">Add Marginal Histograms to ggplot2, and More ggplot2 Enhancements</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggfan</strong></td>
<td align="left">Summarise a Distribution Through Coloured Intervals</td>
</tr>
<tr class="even">
<td align="left"><strong>ggfittext</strong></td>
<td align="left">Fit Text Inside a Box in ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggfocus</strong></td>
<td align="left">Scales that Focus Specific Levels in your ggplot()</td>
</tr>
<tr class="even">
<td align="left"><strong>ggforce</strong></td>
<td align="left">Accelerating ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggformula</strong></td>
<td align="left">Formula Interface to the Grammar of Graphics</td>
</tr>
<tr class="even">
<td align="left"><strong>ggfortify</strong></td>
<td align="left">Data Visualization Tools for Statistical Analysis Results</td>
</tr>
<tr class="odd">
<td align="left"><strong>gggenes</strong></td>
<td align="left">Draw Gene Arrow Maps in ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggghost</strong></td>
<td align="left">Capture the Spirit of Your ggplot2 Calls</td>
</tr>
<tr class="odd">
<td align="left"><strong>gggibbous</strong></td>
<td align="left">Moon Charts, a Pie Chart Alternative</td>
</tr>
<tr class="even">
<td align="left"><strong>ggguitar</strong></td>
<td align="left">Utilities for Creating Guitar Tablature</td>
</tr>
<tr class="odd">
<td align="left"><strong>gghalfnorm</strong></td>
<td align="left">Create a Half Normal Plot Using ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>gghalves</strong></td>
<td align="left">Compose Half-Half Plots Using Your Favourite Geoms</td>
</tr>
<tr class="odd">
<td align="left"><strong>gghighlight</strong></td>
<td align="left">Highlight Lines and Points in ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggimage</strong></td>
<td align="left">Use Image in ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>gginference</strong></td>
<td align="left">Visualise the Results of Inferential Statistics using ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>gginnards</strong></td>
<td align="left">Explore the Innards of ggplot2 Objects</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggiraph</strong></td>
<td align="left">Make ggplot2 Graphics Interactive</td>
</tr>
<tr class="even">
<td align="left"><strong>ggiraphExtra</strong></td>
<td align="left">Make Interactive ggplot2. Extension to ggplot2 and ggiraph</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggjoy</strong></td>
<td align="left">Joyplots in ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>gglasso</strong></td>
<td align="left">Group Lasso Penalized Learning Using a Unified BMD Algorithm</td>
</tr>
<tr class="odd">
<td align="left"><strong>gglogo</strong></td>
<td align="left">Geom for Logo Sequence Plots</td>
</tr>
<tr class="even">
<td align="left"><strong>ggloop</strong></td>
<td align="left">Create ggplot2 Plots in a Loop</td>
</tr>
<tr class="odd">
<td align="left"><strong>gglorenz</strong></td>
<td align="left">Plotting Lorenz Curve with the Blessing of ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggm</strong></td>
<td align="left">Graphical Markov Models with Mixed Graphs</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggmap</strong></td>
<td align="left">Spatial Visualization with ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggmcmc</strong></td>
<td align="left">Tools for Analyzing MCMC Simulations from Bayesian Inference</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggmosaic</strong></td>
<td align="left">Mosaic Plots in the ggplot2 Framework</td>
</tr>
<tr class="even">
<td align="left"><strong>ggmr</strong></td>
<td align="left">Generalized Gauss Markov Regression</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggmsa</strong></td>
<td align="left">Plot Multiple Sequence Alignment using ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggmuller</strong></td>
<td align="left">Create Muller Plots of Evolutionary Dynamics</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggnetwork</strong></td>
<td align="left">Geometries to Plot Networks with ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggnewscale</strong></td>
<td align="left">Multiple Fill and Colour Scales in ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggnormalviolin</strong></td>
<td align="left">A ggplot2 Extension to Make Normal Violin Plots</td>
</tr>
<tr class="even">
<td align="left"><strong>ggpage</strong></td>
<td align="left">Creates Page Layout Visualizations</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggparallel</strong></td>
<td align="left">Variations of Parallel Coordinate Plots for Categorical Data</td>
</tr>
<tr class="even">
<td align="left"><strong>ggparliament</strong></td>
<td align="left">Parliament Plots</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggparty</strong></td>
<td align="left">ggplot Visualizations for the partykit Package</td>
</tr>
<tr class="even">
<td align="left"><strong>ggperiodic</strong></td>
<td align="left">Easy Plotting of Periodic Data with ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggplot.multistats</strong></td>
<td align="left">Multiple Summary Statistics for Binned Stats/Geometries</td>
</tr>
<tr class="even">
<td align="left"><strong>ggplot2</strong></td>
<td align="left">Create Elegant Data Visualisations Using the Grammar of Graphics</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggplot2movies</strong></td>
<td align="left">Movies Data</td>
</tr>
<tr class="even">
<td align="left"><strong>ggplotAssist</strong></td>
<td align="left">RStudio Addin for Teaching and Learning ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggplotgui</strong></td>
<td align="left">Create Ggplots via a Graphical User Interface</td>
</tr>
<tr class="even">
<td align="left"><strong>ggplotify</strong></td>
<td align="left">Convert Plot to grob or ggplot Object</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggplotlyExtra</strong></td>
<td align="left">Extra Convenience Functions for Plotly</td>
</tr>
<tr class="even">
<td align="left"><strong>ggpmisc</strong></td>
<td align="left">Miscellaneous Extensions to ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggPMX</strong></td>
<td align="left">ggplot2 Based Tool to Facilitate Diagnostic Plots for NLME Models</td>
</tr>
<tr class="even">
<td align="left"><strong>ggpointdensity</strong></td>
<td align="left">A Cross Between a 2D Density Plot and a Scatter Plot</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggpol</strong></td>
<td align="left">Visualizing Social Science Data with ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggpolypath</strong></td>
<td align="left">Polygons with Holes for the Grammar of Graphics</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggpubr</strong></td>
<td align="left">ggplot2 Based Publication Ready Plots</td>
</tr>
<tr class="even">
<td align="left"><strong>ggpval</strong></td>
<td align="left">Annotate Statistical Tests for ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggQC</strong></td>
<td align="left">Quality Control Charts for ggplot</td>
</tr>
<tr class="even">
<td align="left"><strong>ggQQunif</strong></td>
<td align="left">Compare Big Datasets to the Uniform Distribution</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggquickeda</strong></td>
<td align="left">Quickly Explore Your Data Using ggplot2 and table1 Summary Tables</td>
</tr>
<tr class="even">
<td align="left"><strong>ggquiver</strong></td>
<td align="left">Quiver Plots for ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggRandomForests</strong></td>
<td align="left">Visually Exploring Random Forests</td>
</tr>
<tr class="even">
<td align="left"><strong>ggraph</strong></td>
<td align="left">An Implementation of Grammar of Graphics for Graphs and Networks</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggraptR</strong></td>
<td align="left">Allows Interactive Visualization of Data Through a Web Browser GUI</td>
</tr>
<tr class="even">
<td align="left"><strong>ggrasp</strong></td>
<td align="left">Gaussian-Based Genome Representative Selector with Prioritization</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggrepel</strong></td>
<td align="left">Automatically Position Non-Overlapping Text Labels with ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggResidpanel</strong></td>
<td align="left">Panels and Interactive Versions of Diagnostic Plots using ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggridges</strong></td>
<td align="left">Ridgeline Plots in ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggrisk</strong></td>
<td align="left">Risk Score Plot for Cox Regression</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggROC</strong></td>
<td align="left">package for roc curve plot with ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggroups</strong></td>
<td align="left">Pedigree and Genetic Groups</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggsci</strong></td>
<td align="left">Scientific Journal and Sci-Fi Themed Color Palettes for ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggseas</strong></td>
<td align="left">stats for Seasonal Adjustment on the Fly with ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggseqlogo</strong></td>
<td align="left">A ggplot2 Extension for Drawing Publication-Ready Sequence Logos</td>
</tr>
<tr class="even">
<td align="left"><strong>ggsignif</strong></td>
<td align="left">Significance Brackets for ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggsn</strong></td>
<td align="left">North Symbols and Scale Bars for Maps Created with ggplot2 or ggmap</td>
</tr>
<tr class="even">
<td align="left"><strong>ggsoccer</strong></td>
<td align="left">Plot Soccer Event Data</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggsolvencyii</strong></td>
<td align="left">A ggplot2-Plot of Composition of Solvency II SCR: SF and IM</td>
</tr>
<tr class="even">
<td align="left"><strong>ggsom</strong></td>
<td align="left">New Data Visualisations for SOMs Networks</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggspatial</strong></td>
<td align="left">Spatial Data Framework for ggplot2</td>
</tr>
<tr class="even">
<td align="left"><strong>ggspectra</strong></td>
<td align="left">Extensions to ggplot2 for Radiation Spectra</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggstance</strong></td>
<td align="left">Horizontal ggplot2 Components</td>
</tr>
<tr class="even">
<td align="left"><strong>ggstatsplot</strong></td>
<td align="left">ggplot2 Based Plots with Statistical Details</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggswissmaps</strong></td>
<td align="left">Offers Various Swiss Maps as Data Frames and ggplot2 Objects</td>
</tr>
<tr class="even">
<td align="left"><strong>ggtern</strong></td>
<td align="left">An Extension to ggplot2, for the Creation of Ternary Diagrams</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggThemeAssist</strong></td>
<td align="left">Add-in to Customize ggplot2 Themes</td>
</tr>
<tr class="even">
<td align="left"><strong>ggthemes</strong></td>
<td align="left">Extra Themes, Scales and Geoms for ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggTimeSeries</strong></td>
<td align="left">Time Series Visualisations Using the Grammar of Graphics</td>
</tr>
<tr class="even">
<td align="left"><strong>ggupset</strong></td>
<td align="left">Combination Matrix Axis for ggplot2 to Create UpSet Plots</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggVennDiagram</strong></td>
<td align="left">A ggplot2 Implement of Venn Diagram</td>
</tr>
<tr class="even">
<td align="left"><strong>ggversa</strong></td>
<td align="left">Graficas Versatiles Con ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggvis</strong></td>
<td align="left">Interactive Grammar of Graphics</td>
</tr>
<tr class="even">
<td align="left"><strong>ggvoronoi</strong></td>
<td align="left">Voronoi Diagrams and Heatmaps with ggplot2</td>
</tr>
<tr class="odd">
<td align="left"><strong>ggwordcloud</strong></td>
<td align="left">A Word Cloud Geom for ggplot2</td>
</tr>
</tbody>
</table>
<p>David Robinson 给出为何使用 ggplot2<a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a> 当然也有 Jeff Leek 指出在某些重要场合不适合 ggplot2<a href="#fn41" class="footnote-ref" id="fnref41"><sup>41</sup></a> 并且给出强有力的 <a href="http://motioninsocial.com/tufte/">证据</a>，其实不管怎么样，适合自己的才是好的。也不枉费 Garrick Aden-Buie 花费 160 页幻灯片逐步分解介绍 <a href="https://pkg.garrickadenbuie.com/gentle-ggplot2">优雅的ggplot2</a>，<a href="https://malco.io/">Malcolm Barrett</a> 也介绍了 <a href="https://malco.io/slides/hs_ggplot2">ggplot2 基础用法</a>，还有 Selva Prabhakaran 精心总结给出了 50 个 ggplot2 数据可视化的 <a href="https://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">例子</a> 以及 Victor Perrier 为小白用 ggplot2 操碎了心地开发 RStudio 插件 <a href="https://github.com/dreamRs/esquisse">esquisse</a> 包，Claus O. Wilke 教你一步步创建出版级的图形 <a href="https://github.com/clauswilke/practical_ggplot2" class="uri">https://github.com/clauswilke/practical_ggplot2</a>。</p>
<p>GGplot2 是十分方便的统计作图工具，相比 Base R，为了一张出版级的图形，不需要去调整每个参数，实现快速出图。集成了很多其它统计计算的 R 包，支持丰富的统计分析和计算功能，如回归、平滑等，实现了作图和模型的无缝连接。比如图<a href="dv-ggplot2.html#fig:awesome-ggplot2">12.1</a>，使用 loess 局部多项式平滑得到数据的趋势，不仅仅是散点图，代码量也非常少。</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="dv-ggplot2.html#cb541-1"></a><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span></span>
<span id="cb541-2"><a href="dv-ggplot2.html#cb541-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> class)) <span class="op">+</span></span>
<span id="cb541-3"><a href="dv-ggplot2.html#cb541-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">TRUE</span>, <span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>) <span class="op">+</span></span>
<span id="cb541-4"><a href="dv-ggplot2.html#cb541-4"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb541-5"><a href="dv-ggplot2.html#cb541-5"></a>    <span class="dt">title =</span> <span class="st">&quot;Fuel efficiency generally decreases with engine size&quot;</span>,</span>
<span id="cb541-6"><a href="dv-ggplot2.html#cb541-6"></a>    <span class="dt">subtitle =</span> <span class="st">&quot;Two seaters (sports cars) are an exception because of their light weight&quot;</span>,</span>
<span id="cb541-7"><a href="dv-ggplot2.html#cb541-7"></a>    <span class="dt">caption =</span> <span class="st">&quot;Data from fueleconomy.gov&quot;</span></span>
<span id="cb541-8"><a href="dv-ggplot2.html#cb541-8"></a>  )</span>
<span id="cb541-9"><a href="dv-ggplot2.html#cb541-9"></a><span class="co">#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:awesome-ggplot2"></span>
<img src="dv-ggplot2_files/figure-html/awesome-ggplot2-1.png" alt="简洁美观" width="70%" />
<p class="caption">
图 12.1: 简洁美观
</p>
</div>
<p>故事源于一幅图片，我不记得第一次见到这幅图是什么时候了，只因多次在多个场合中见过，所以留下了深刻的印象，后来才知道它出自于一篇博文 — <a href="https://medium.com/airbnb-engineering/using-r-packages-and-education-to-scale-data-science-at-airbnb">Using R packages and education to scale Data Science at Airbnb</a>，作者 Ricardo Bion 还在其 Github 上传了相关代码<a href="#fn42" class="footnote-ref" id="fnref42"><sup>42</sup></a>。除此之外还有几篇重要的参考资料：</p>
<ol style="list-style-type: decimal">
<li>Pablo Barberá 的 <a href="https://github.com/pablobarbera/Rdataviz">Data Visualization with R and ggplot2</a></li>
<li>Kieran Healy 的新书 <a href="https://kieranhealy.org/publications/dataviz/">Data Visualization: A Practical Introduction</a></li>
<li>Matt Leonawicz 的新作 <a href="https://github.com/leonawicz/mapmate">mapmate</a>, 可以去其主页欣赏系列作品<a href="#fn43" class="footnote-ref" id="fnref43"><sup>43</sup></a></li>
<li><a href="https://github.com/rfordatascience/tidytuesday">tidytuesday 可视化挑战官方项目</a> 还有 <a href="https://github.com/abichat/tidytuesday">tidytuesday</a></li>
<li><a href="https://github.com/IndrajeetPatil/ggstatsplot">ggstatsplot</a> 可视化统计检验、模型的结果</li>
<li><a href="https://github.com/kassambara/ggpubr">ggpubr</a> 制作出版级统计图形</li>
</ol>
<div id="intro-ggplot2" class="section level2">
<h2><span class="header-section-number">12.1</span> 基础语法</h2>
<p>以数据集 airquality 为例介绍GGplot2 图层、主题、配色、坐标、尺度、注释和组合等</p>
<div id="ggplot2-layer" class="section level3">
<h3><span class="header-section-number">12.1.1</span> 图层</h3>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="dv-ggplot2.html#cb542-1"></a><span class="kw">ls</span>(<span class="st">&quot;package:ggplot2&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;^geom_&quot;</span>)</span>
<span id="cb542-2"><a href="dv-ggplot2.html#cb542-2"></a><span class="co">#&gt;  [1] &quot;geom_abline&quot;         &quot;geom_area&quot;           &quot;geom_bar&quot;           </span></span>
<span id="cb542-3"><a href="dv-ggplot2.html#cb542-3"></a><span class="co">#&gt;  [4] &quot;geom_bin2d&quot;          &quot;geom_blank&quot;          &quot;geom_boxplot&quot;       </span></span>
<span id="cb542-4"><a href="dv-ggplot2.html#cb542-4"></a><span class="co">#&gt;  [7] &quot;geom_col&quot;            &quot;geom_contour&quot;        &quot;geom_contour_filled&quot;</span></span>
<span id="cb542-5"><a href="dv-ggplot2.html#cb542-5"></a><span class="co">#&gt; [10] &quot;geom_count&quot;          &quot;geom_crossbar&quot;       &quot;geom_curve&quot;         </span></span>
<span id="cb542-6"><a href="dv-ggplot2.html#cb542-6"></a><span class="co">#&gt; [13] &quot;geom_density&quot;        &quot;geom_density_2d&quot;     &quot;geom_density2d&quot;     </span></span>
<span id="cb542-7"><a href="dv-ggplot2.html#cb542-7"></a><span class="co">#&gt; [16] &quot;geom_dotplot&quot;        &quot;geom_errorbar&quot;       &quot;geom_errorbarh&quot;     </span></span>
<span id="cb542-8"><a href="dv-ggplot2.html#cb542-8"></a><span class="co">#&gt; [19] &quot;geom_freqpoly&quot;       &quot;geom_hex&quot;            &quot;geom_histogram&quot;     </span></span>
<span id="cb542-9"><a href="dv-ggplot2.html#cb542-9"></a><span class="co">#&gt; [22] &quot;geom_hline&quot;          &quot;geom_jitter&quot;         &quot;geom_label&quot;         </span></span>
<span id="cb542-10"><a href="dv-ggplot2.html#cb542-10"></a><span class="co">#&gt; [25] &quot;geom_line&quot;           &quot;geom_linerange&quot;      &quot;geom_map&quot;           </span></span>
<span id="cb542-11"><a href="dv-ggplot2.html#cb542-11"></a><span class="co">#&gt; [28] &quot;geom_path&quot;           &quot;geom_point&quot;          &quot;geom_pointrange&quot;    </span></span>
<span id="cb542-12"><a href="dv-ggplot2.html#cb542-12"></a><span class="co">#&gt; [31] &quot;geom_polygon&quot;        &quot;geom_qq&quot;             &quot;geom_qq_line&quot;       </span></span>
<span id="cb542-13"><a href="dv-ggplot2.html#cb542-13"></a><span class="co">#&gt; [34] &quot;geom_quantile&quot;       &quot;geom_raster&quot;         &quot;geom_rect&quot;          </span></span>
<span id="cb542-14"><a href="dv-ggplot2.html#cb542-14"></a><span class="co">#&gt; [37] &quot;geom_ribbon&quot;         &quot;geom_rug&quot;            &quot;geom_segment&quot;       </span></span>
<span id="cb542-15"><a href="dv-ggplot2.html#cb542-15"></a><span class="co">#&gt; [40] &quot;geom_sf&quot;             &quot;geom_sf_label&quot;       &quot;geom_sf_text&quot;       </span></span>
<span id="cb542-16"><a href="dv-ggplot2.html#cb542-16"></a><span class="co">#&gt; [43] &quot;geom_smooth&quot;         &quot;geom_spoke&quot;          &quot;geom_step&quot;          </span></span>
<span id="cb542-17"><a href="dv-ggplot2.html#cb542-17"></a><span class="co">#&gt; [46] &quot;geom_text&quot;           &quot;geom_tile&quot;           &quot;geom_violin&quot;        </span></span>
<span id="cb542-18"><a href="dv-ggplot2.html#cb542-18"></a><span class="co">#&gt; [49] &quot;geom_vline&quot;</span></span></code></pre></div>
<p>生成一个散点图</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="dv-ggplot2.html#cb543-1"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</span>
<span id="cb543-2"><a href="dv-ggplot2.html#cb543-2"></a><span class="co">#&gt; Warning: Removed 37 rows containing missing values (geom_point).</span></span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-3-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggplot2-theme" class="section level3">
<h3><span class="header-section-number">12.1.2</span> 主题</h3>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="dv-ggplot2.html#cb544-1"></a><span class="kw">ls</span>(<span class="st">&quot;package:ggplot2&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;^theme_&quot;</span>)</span>
<span id="cb544-2"><a href="dv-ggplot2.html#cb544-2"></a><span class="co">#&gt;  [1] &quot;theme_bw&quot;       &quot;theme_classic&quot;  &quot;theme_dark&quot;     &quot;theme_get&quot;     </span></span>
<span id="cb544-3"><a href="dv-ggplot2.html#cb544-3"></a><span class="co">#&gt;  [5] &quot;theme_gray&quot;     &quot;theme_grey&quot;     &quot;theme_light&quot;    &quot;theme_linedraw&quot;</span></span>
<span id="cb544-4"><a href="dv-ggplot2.html#cb544-4"></a><span class="co">#&gt;  [9] &quot;theme_minimal&quot;  &quot;theme_replace&quot;  &quot;theme_set&quot;      &quot;theme_test&quot;    </span></span>
<span id="cb544-5"><a href="dv-ggplot2.html#cb544-5"></a><span class="co">#&gt; [13] &quot;theme_update&quot;   &quot;theme_void&quot;</span></span></code></pre></div>
<p>这里只展示 <code>theme_bw()</code> <code>theme_void()</code> <code>theme_minimal()</code> 和 <code>theme_void()</code> 等四个常见主题，更多主题参考 <a href="https://github.com/nanxstats/ggsci">ggsci</a>、<a href="https://github.com/jrnold/ggthemes">ggthemes</a> 、<a href="https://github.com/ricardo-bion/ggtech">ggtech</a>、<a href="https://github.com/hrbrmstr/hrbrthemes">hrbrthemes</a> 和 <a href="https://github.com/cttobin/ggthemr">ggthemr</a> 包</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="dv-ggplot2.html#cb545-1"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</span>
<span id="cb545-2"><a href="dv-ggplot2.html#cb545-2"></a><span class="co">#&gt; Warning: Removed 37 rows containing missing values (geom_point).</span></span>
<span id="cb545-3"><a href="dv-ggplot2.html#cb545-3"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_void</span>()</span>
<span id="cb545-4"><a href="dv-ggplot2.html#cb545-4"></a><span class="co">#&gt; Warning: Removed 37 rows containing missing values (geom_point).</span></span>
<span id="cb545-5"><a href="dv-ggplot2.html#cb545-5"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_minimal</span>()</span>
<span id="cb545-6"><a href="dv-ggplot2.html#cb545-6"></a><span class="co">#&gt; Warning: Removed 37 rows containing missing values (geom_point).</span></span>
<span id="cb545-7"><a href="dv-ggplot2.html#cb545-7"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_void</span>()</span>
<span id="cb545-8"><a href="dv-ggplot2.html#cb545-8"></a><span class="co">#&gt; Warning: Removed 37 rows containing missing values (geom_point).</span></span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-5-1.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-5-2.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-5-3.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-5-4.png" width="70%" style="display: block; margin: auto;" /></p>
<p>除主题之外，还有一类提供一整套统一的风格样式来绘制各种统计图形，如 <a href="https://github.com/kassambara/ggpubr">ggpubr</a> 和 <a href="https://github.com/bbc/bbplot">bbplot</a></p>
</div>
<div id="ggplot2-color" class="section level3">
<h3><span class="header-section-number">12.1.3</span> 配色</h3>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="dv-ggplot2.html#cb546-1"></a><span class="kw">ls</span>(<span class="st">&quot;package:ggplot2&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;^scale_(color|fill)_&quot;</span>)</span>
<span id="cb546-2"><a href="dv-ggplot2.html#cb546-2"></a><span class="co">#&gt;  [1] &quot;scale_color_binned&quot;     &quot;scale_color_brewer&quot;     &quot;scale_color_continuous&quot;</span></span>
<span id="cb546-3"><a href="dv-ggplot2.html#cb546-3"></a><span class="co">#&gt;  [4] &quot;scale_color_date&quot;       &quot;scale_color_datetime&quot;   &quot;scale_color_discrete&quot;  </span></span>
<span id="cb546-4"><a href="dv-ggplot2.html#cb546-4"></a><span class="co">#&gt;  [7] &quot;scale_color_distiller&quot;  &quot;scale_color_fermenter&quot;  &quot;scale_color_gradient&quot;  </span></span>
<span id="cb546-5"><a href="dv-ggplot2.html#cb546-5"></a><span class="co">#&gt; [10] &quot;scale_color_gradient2&quot;  &quot;scale_color_gradientn&quot;  &quot;scale_color_grey&quot;      </span></span>
<span id="cb546-6"><a href="dv-ggplot2.html#cb546-6"></a><span class="co">#&gt; [13] &quot;scale_color_hue&quot;        &quot;scale_color_identity&quot;   &quot;scale_color_manual&quot;    </span></span>
<span id="cb546-7"><a href="dv-ggplot2.html#cb546-7"></a><span class="co">#&gt; [16] &quot;scale_color_ordinal&quot;    &quot;scale_color_steps&quot;      &quot;scale_color_steps2&quot;    </span></span>
<span id="cb546-8"><a href="dv-ggplot2.html#cb546-8"></a><span class="co">#&gt; [19] &quot;scale_color_stepsn&quot;     &quot;scale_color_viridis_c&quot;  &quot;scale_color_viridis_d&quot; </span></span>
<span id="cb546-9"><a href="dv-ggplot2.html#cb546-9"></a><span class="co">#&gt; [22] &quot;scale_fill_binned&quot;      &quot;scale_fill_brewer&quot;      &quot;scale_fill_continuous&quot; </span></span>
<span id="cb546-10"><a href="dv-ggplot2.html#cb546-10"></a><span class="co">#&gt; [25] &quot;scale_fill_date&quot;        &quot;scale_fill_datetime&quot;    &quot;scale_fill_discrete&quot;   </span></span>
<span id="cb546-11"><a href="dv-ggplot2.html#cb546-11"></a><span class="co">#&gt; [28] &quot;scale_fill_distiller&quot;   &quot;scale_fill_fermenter&quot;   &quot;scale_fill_gradient&quot;   </span></span>
<span id="cb546-12"><a href="dv-ggplot2.html#cb546-12"></a><span class="co">#&gt; [31] &quot;scale_fill_gradient2&quot;   &quot;scale_fill_gradientn&quot;   &quot;scale_fill_grey&quot;       </span></span>
<span id="cb546-13"><a href="dv-ggplot2.html#cb546-13"></a><span class="co">#&gt; [34] &quot;scale_fill_hue&quot;         &quot;scale_fill_identity&quot;    &quot;scale_fill_manual&quot;     </span></span>
<span id="cb546-14"><a href="dv-ggplot2.html#cb546-14"></a><span class="co">#&gt; [37] &quot;scale_fill_ordinal&quot;     &quot;scale_fill_steps&quot;       &quot;scale_fill_steps2&quot;     </span></span>
<span id="cb546-15"><a href="dv-ggplot2.html#cb546-15"></a><span class="co">#&gt; [40] &quot;scale_fill_stepsn&quot;      &quot;scale_fill_viridis_b&quot;   &quot;scale_fill_viridis_c&quot;  </span></span>
<span id="cb546-16"><a href="dv-ggplot2.html#cb546-16"></a><span class="co">#&gt; [43] &quot;scale_fill_viridis_d&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="dv-ggplot2.html#cb547-1"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone, <span class="dt">color =</span> <span class="kw">as.factor</span>(Month))) <span class="op">+</span></span>
<span id="cb547-2"><a href="dv-ggplot2.html#cb547-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb547-3"><a href="dv-ggplot2.html#cb547-3"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone, <span class="dt">color =</span> <span class="kw">as.ordered</span>(Month))) <span class="op">+</span></span>
<span id="cb547-4"><a href="dv-ggplot2.html#cb547-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-7-2.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggplot2-scale" class="section level3">
<h3><span class="header-section-number">12.1.4</span> 刻度</h3>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="dv-ggplot2.html#cb548-1"></a><span class="kw">ls</span>(<span class="st">&quot;package:ggplot2&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;^scale_(x|y)_&quot;</span>)</span>
<span id="cb548-2"><a href="dv-ggplot2.html#cb548-2"></a><span class="co">#&gt;  [1] &quot;scale_x_binned&quot;     &quot;scale_x_continuous&quot; &quot;scale_x_date&quot;      </span></span>
<span id="cb548-3"><a href="dv-ggplot2.html#cb548-3"></a><span class="co">#&gt;  [4] &quot;scale_x_datetime&quot;   &quot;scale_x_discrete&quot;   &quot;scale_x_log10&quot;     </span></span>
<span id="cb548-4"><a href="dv-ggplot2.html#cb548-4"></a><span class="co">#&gt;  [7] &quot;scale_x_reverse&quot;    &quot;scale_x_sqrt&quot;       &quot;scale_x_time&quot;      </span></span>
<span id="cb548-5"><a href="dv-ggplot2.html#cb548-5"></a><span class="co">#&gt; [10] &quot;scale_y_binned&quot;     &quot;scale_y_continuous&quot; &quot;scale_y_date&quot;      </span></span>
<span id="cb548-6"><a href="dv-ggplot2.html#cb548-6"></a><span class="co">#&gt; [13] &quot;scale_y_datetime&quot;   &quot;scale_y_discrete&quot;   &quot;scale_y_log10&quot;     </span></span>
<span id="cb548-7"><a href="dv-ggplot2.html#cb548-7"></a><span class="co">#&gt; [16] &quot;scale_y_reverse&quot;    &quot;scale_y_sqrt&quot;       &quot;scale_y_time&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="dv-ggplot2.html#cb549-1"></a><span class="kw">range</span>(airquality<span class="op">$</span>Temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb549-2"><a href="dv-ggplot2.html#cb549-2"></a><span class="co">#&gt; [1] 56 97</span></span>
<span id="cb549-3"><a href="dv-ggplot2.html#cb549-3"></a><span class="kw">range</span>(airquality<span class="op">$</span>Ozone, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb549-4"><a href="dv-ggplot2.html#cb549-4"></a><span class="co">#&gt; [1]   1 168</span></span>
<span id="cb549-5"><a href="dv-ggplot2.html#cb549-5"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb549-6"><a href="dv-ggplot2.html#cb549-6"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb549-7"><a href="dv-ggplot2.html#cb549-7"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">5</span>)) <span class="op">+</span></span>
<span id="cb549-8"><a href="dv-ggplot2.html#cb549-8"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">200</span>, <span class="dv">20</span>))</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggplot2-annotate" class="section level3">
<h3><span class="header-section-number">12.1.5</span> 注释</h3>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="dv-ggplot2.html#cb550-1"></a><span class="kw">ls</span>(<span class="st">&quot;package:ggplot2&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;^annotation_&quot;</span>)</span>
<span id="cb550-2"><a href="dv-ggplot2.html#cb550-2"></a><span class="co">#&gt; [1] &quot;annotation_custom&quot;   &quot;annotation_logticks&quot; &quot;annotation_map&quot;     </span></span>
<span id="cb550-3"><a href="dv-ggplot2.html#cb550-3"></a><span class="co">#&gt; [4] &quot;annotation_raster&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="dv-ggplot2.html#cb551-1"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb551-2"><a href="dv-ggplot2.html#cb551-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="dv-ggplot2.html#cb552-1"></a><span class="kw">ggplot</span>(airquality, <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb552-2"><a href="dv-ggplot2.html#cb552-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb552-3"><a href="dv-ggplot2.html#cb552-3"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="kw">substitute</span>(<span class="kw">paste</span>(d <span class="op">*</span></span>
<span id="cb552-4"><a href="dv-ggplot2.html#cb552-4"></a><span class="st">    </span><span class="kw">bolditalic</span>(x)[<span class="kw">italic</span>(t)] <span class="op">==</span><span class="st"> </span>alpha <span class="op">*</span><span class="st"> </span>(theta <span class="op">-</span><span class="st"> </span><span class="kw">bolditalic</span>(x)[<span class="kw">italic</span>(t)]) <span class="op">*</span></span>
<span id="cb552-5"><a href="dv-ggplot2.html#cb552-5"></a><span class="st">    </span>d <span class="op">*</span><span class="st"> </span><span class="kw">italic</span>(t) <span class="op">+</span><span class="st"> </span>lambda <span class="op">*</span><span class="st"> </span>d <span class="op">*</span><span class="st"> </span><span class="kw">italic</span>(B)[<span class="kw">italic</span>(t)]), <span class="kw">list</span>(<span class="dt">lambda =</span> <span class="dv">4</span>)))</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/math-expr-r-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggplot2-legend" class="section level3">
<h3><span class="header-section-number">12.1.6</span> 图例</h3>
<p>二维的图例 <a href="https://github.com/slu-openGIS/biscale">biscale</a> 和 <a href="https://github.com/clauswilke/multiscales">multiscales</a> 和 <a href="https://github.com/eliocamp/ggnewscale">ggnewscale</a></p>
</div>
<div id="ggplot2-grid" class="section level3">
<h3><span class="header-section-number">12.1.7</span> 组合</h3>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="dv-ggplot2.html#cb553-1"></a><span class="kw">ggplot</span>(airquality) <span class="op">+</span><span class="st"> </span></span>
<span id="cb553-2"><a href="dv-ggplot2.html#cb553-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb553-3"><a href="dv-ggplot2.html#cb553-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span><span class="kw">as.ordered</span>(Month))</span>
<span id="cb553-4"><a href="dv-ggplot2.html#cb553-4"></a><span class="kw">ggplot</span>(airquality) <span class="op">+</span><span class="st"> </span></span>
<span id="cb553-5"><a href="dv-ggplot2.html#cb553-5"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb553-6"><a href="dv-ggplot2.html#cb553-6"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span><span class="kw">as.ordered</span>(Month), <span class="dt">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-12-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p><a href="https://github.com/wilkelab/cowplot">cowplot</a> 是以作者 <a href="https://wilkelab.org/">Claus O. Wilke</a> 命名的，用来组合 ggplot 对象画图，类似的组合图形的功能包还有 <a href="https://baptiste.github.io/">baptiste auguié</a> 开发的 <a href="https://CRAN.R-project.org/package=gridExtra">gridExtra</a> 和 <a href="https://github.com/baptiste/egg">egg</a>， <a href="https://www.data-imaginist.com/">Thomas Lin Pedersen</a> 开发的 <a href="https://github.com/thomasp85/patchwork">patchwork</a></p>
<p><a href="https://deanattali.com/">Dean Attali</a> 开发的 <a href="https://github.com/daattali/ggExtra">ggExtra</a> 可以在图的边界添加密度估计曲线，直方图等</p>
</div>
<div id="ggplot2-coord" class="section level3">
<h3><span class="header-section-number">12.1.8</span> 坐标系</h3>
<p>极坐标，直角坐标</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="dv-ggplot2.html#cb554-1"></a><span class="kw">ls</span>(<span class="st">&quot;package:ggplot2&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;^coord_&quot;</span>)</span>
<span id="cb554-2"><a href="dv-ggplot2.html#cb554-2"></a><span class="co">#&gt;  [1] &quot;coord_cartesian&quot; &quot;coord_equal&quot;     &quot;coord_fixed&quot;     &quot;coord_flip&quot;     </span></span>
<span id="cb554-3"><a href="dv-ggplot2.html#cb554-3"></a><span class="co">#&gt;  [5] &quot;coord_map&quot;       &quot;coord_munch&quot;     &quot;coord_polar&quot;     &quot;coord_quickmap&quot; </span></span>
<span id="cb554-4"><a href="dv-ggplot2.html#cb554-4"></a><span class="co">#&gt;  [9] &quot;coord_sf&quot;        &quot;coord_trans&quot;</span></span></code></pre></div>
</div>
<div id="ggplot2-axes" class="section level3">
<h3><span class="header-section-number">12.1.9</span> 坐标轴</h3>
<p>坐标轴标签位置、大小、字体</p>
</div>
</div>
<div id="ggplot2-gallary" class="section level2">
<h2><span class="header-section-number">12.2</span> 统计图形</h2>
<div id="ggplot2-scatter" class="section level3">
<h3><span class="header-section-number">12.2.1</span> 散点图</h3>
<p>下面以 diamonds 数据集为例展示 ggplot2 的绘图过程，首先加载 diamonds 数据集，查看数据集的内容</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="dv-ggplot2.html#cb555-1"></a><span class="kw">data</span>(diamonds)</span>
<span id="cb555-2"><a href="dv-ggplot2.html#cb555-2"></a><span class="kw">str</span>(diamonds)</span>
<span id="cb555-3"><a href="dv-ggplot2.html#cb555-3"></a><span class="co">#&gt; Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    53940 obs. of  10 variables:</span></span>
<span id="cb555-4"><a href="dv-ggplot2.html#cb555-4"></a><span class="co">#&gt;  $ carat  : num  0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...</span></span>
<span id="cb555-5"><a href="dv-ggplot2.html#cb555-5"></a><span class="co">#&gt;  $ cut    : Ord.factor w/ 5 levels &quot;Fair&quot;&lt;&quot;Good&quot;&lt;..: 5 4 2 4 2 3 3 3 1 3 ...</span></span>
<span id="cb555-6"><a href="dv-ggplot2.html#cb555-6"></a><span class="co">#&gt;  $ color  : Ord.factor w/ 7 levels &quot;D&quot;&lt;&quot;E&quot;&lt;&quot;F&quot;&lt;&quot;G&quot;&lt;..: 2 2 2 6 7 7 6 5 2 5 ...</span></span>
<span id="cb555-7"><a href="dv-ggplot2.html#cb555-7"></a><span class="co">#&gt;  $ clarity: Ord.factor w/ 8 levels &quot;I1&quot;&lt;&quot;SI2&quot;&lt;&quot;SI1&quot;&lt;..: 2 3 5 4 2 6 7 3 4 5 ...</span></span>
<span id="cb555-8"><a href="dv-ggplot2.html#cb555-8"></a><span class="co">#&gt;  $ depth  : num  61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...</span></span>
<span id="cb555-9"><a href="dv-ggplot2.html#cb555-9"></a><span class="co">#&gt;  $ table  : num  55 61 65 58 58 57 57 55 61 61 ...</span></span>
<span id="cb555-10"><a href="dv-ggplot2.html#cb555-10"></a><span class="co">#&gt;  $ price  : int  326 326 327 334 335 336 336 337 337 338 ...</span></span>
<span id="cb555-11"><a href="dv-ggplot2.html#cb555-11"></a><span class="co">#&gt;  $ x      : num  3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...</span></span>
<span id="cb555-12"><a href="dv-ggplot2.html#cb555-12"></a><span class="co">#&gt;  $ y      : num  3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...</span></span>
<span id="cb555-13"><a href="dv-ggplot2.html#cb555-13"></a><span class="co">#&gt;  $ z      : num  2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...</span></span></code></pre></div>
<p>数值型变量 carat 作为 x 轴</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="dv-ggplot2.html#cb556-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat))</span>
<span id="cb556-2"><a href="dv-ggplot2.html#cb556-2"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price))</span>
<span id="cb556-3"><a href="dv-ggplot2.html#cb556-3"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">color =</span> cut))</span>
<span id="cb556-4"><a href="dv-ggplot2.html#cb556-4"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat), <span class="dt">color =</span> <span class="st">&quot;steelblue&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:diamonds-axis"></span>
<img src="dv-ggplot2_files/figure-html/diamonds-axis-1.png" alt="绘图过程" width="35%" /><img src="dv-ggplot2_files/figure-html/diamonds-axis-2.png" alt="绘图过程" width="35%" /><img src="dv-ggplot2_files/figure-html/diamonds-axis-3.png" alt="绘图过程" width="35%" /><img src="dv-ggplot2_files/figure-html/diamonds-axis-4.png" alt="绘图过程" width="35%" />
<p class="caption">
图 12.2: 绘图过程
</p>
</div>
<p>图 <a href="dv-ggplot2.html#fig:diamonds-axis">12.2</a> 的基础上添加数据图层</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="dv-ggplot2.html#cb557-1"></a>sub_diamonds &lt;-<span class="st"> </span>diamonds[<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(diamonds), <span class="dv">1000</span>), ]</span>
<span id="cb557-2"><a href="dv-ggplot2.html#cb557-2"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span></span>
<span id="cb557-3"><a href="dv-ggplot2.html#cb557-3"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter"></span>
<img src="dv-ggplot2_files/figure-html/scatter-1.png" alt="添加数据图层" width="70%" />
<p class="caption">
图 12.3: 添加数据图层
</p>
</div>
<p>给散点图<a href="dv-ggplot2.html#fig:scatter">12.3</a>上色</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="dv-ggplot2.html#cb558-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span></span>
<span id="cb558-2"><a href="dv-ggplot2.html#cb558-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;steelblue&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter-color-1"></span>
<img src="dv-ggplot2_files/figure-html/scatter-color-1-1.png" alt="散点图配色" width="70%" />
<p class="caption">
图 12.4: 散点图配色
</p>
</div>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="dv-ggplot2.html#cb559-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span></span>
<span id="cb559-2"><a href="dv-ggplot2.html#cb559-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;steelblue&quot;</span>) <span class="op">+</span></span>
<span id="cb559-3"><a href="dv-ggplot2.html#cb559-3"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb559-4"><a href="dv-ggplot2.html#cb559-4"></a>    <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">unit_format</span>(<span class="dt">unit =</span> <span class="st">&quot;k&quot;</span>, <span class="dt">scale =</span> <span class="fl">1e-3</span>),</span>
<span id="cb559-5"><a href="dv-ggplot2.html#cb559-5"></a>    <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">4000</span>)</span>
<span id="cb559-6"><a href="dv-ggplot2.html#cb559-6"></a>  )</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter-scale-1"></span>
<img src="dv-ggplot2_files/figure-html/scatter-scale-1-1.png" alt="格式化坐标轴刻度标签" width="70%" />
<p class="caption">
图 12.5: 格式化坐标轴刻度标签
</p>
</div>
<p>让另一变量 cut 作为颜色分类指标</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="dv-ggplot2.html#cb560-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">color =</span> cut)) <span class="op">+</span></span>
<span id="cb560-2"><a href="dv-ggplot2.html#cb560-2"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter-color-2"></span>
<img src="dv-ggplot2_files/figure-html/scatter-color-2-1.png" alt="分类散点图" width="70%" />
<p class="caption">
图 12.6: 分类散点图
</p>
</div>
<p>当然还有一种类似的表示就是分组，默认情况下，ggplot2将所有观测点视为一组，以分类变量 cut 来分组</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="dv-ggplot2.html#cb561-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">group =</span> cut)) <span class="op">+</span></span>
<span id="cb561-2"><a href="dv-ggplot2.html#cb561-2"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter-group"></span>
<img src="dv-ggplot2_files/figure-html/scatter-group-1.png" alt="分组" width="70%" />
<p class="caption">
图 12.7: 分组
</p>
</div>
<p>在图<a href="dv-ggplot2.html#fig:scatter-group">12.7</a> 上没有体现出来分组的意思，下面以 cut 分组线性回归为例</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="dv-ggplot2.html#cb562-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span></span>
<span id="cb562-2"><a href="dv-ggplot2.html#cb562-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb562-3"><a href="dv-ggplot2.html#cb562-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</span>
<span id="cb562-4"><a href="dv-ggplot2.html#cb562-4"></a><span class="co">#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</span></span>
<span id="cb562-5"><a href="dv-ggplot2.html#cb562-5"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">group =</span> cut)) <span class="op">+</span></span>
<span id="cb562-6"><a href="dv-ggplot2.html#cb562-6"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb562-7"><a href="dv-ggplot2.html#cb562-7"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</span>
<span id="cb562-8"><a href="dv-ggplot2.html#cb562-8"></a><span class="co">#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:group-lm"></span>
<img src="dv-ggplot2_files/figure-html/group-lm-1.png" alt="分组线性回归" width="70%" /><img src="dv-ggplot2_files/figure-html/group-lm-2.png" alt="分组线性回归" width="70%" />
<p class="caption">
图 12.8: 分组线性回归
</p>
</div>
<p>我们当然可以选择更加合适的拟合方式，如局部多项式平滑 <code>loess</code> 但是该方法不太适用观测值比较多的情况，因为它会占用比较多的内存，建议使用广义可加模型作平滑拟合</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="dv-ggplot2.html#cb563-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">group =</span> cut)) <span class="op">+</span></span>
<span id="cb563-2"><a href="dv-ggplot2.html#cb563-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb563-3"><a href="dv-ggplot2.html#cb563-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>)</span>
<span id="cb563-4"><a href="dv-ggplot2.html#cb563-4"></a><span class="co">#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-15"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-15-1.png" alt="局部多项式平滑" width="70%" />
<p class="caption">
图 12.9: 局部多项式平滑
</p>
</div>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="dv-ggplot2.html#cb564-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">group =</span> cut)) <span class="op">+</span></span>
<span id="cb564-2"><a href="dv-ggplot2.html#cb564-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb564-3"><a href="dv-ggplot2.html#cb564-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;gam&quot;</span>, <span class="dt">formula =</span> y <span class="op">~</span><span class="st"> </span><span class="kw">s</span>(x, <span class="dt">bs =</span> <span class="st">&quot;cs&quot;</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:group-gam"></span>
<img src="dv-ggplot2_files/figure-html/group-gam-1.png" alt="数据分组应用广义可加平滑" width="70%" />
<p class="caption">
图 12.10: 数据分组应用广义可加平滑
</p>
</div>
<div class="sidebar">
<p><a href="https://github.com/sinhrks/ggfortify">ggfortify</a> 包支持更多的统计分析结果的可视化</p>
</div>
<p>为了更好地区分开组别，我们在图<a href="dv-ggplot2.html#fig:group-gam">12.10</a>的基础上分面或者配色</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="dv-ggplot2.html#cb565-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">group =</span> cut)) <span class="op">+</span></span>
<span id="cb565-2"><a href="dv-ggplot2.html#cb565-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb565-3"><a href="dv-ggplot2.html#cb565-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;gam&quot;</span>, <span class="dt">formula =</span> y <span class="op">~</span><span class="st"> </span><span class="kw">s</span>(x, <span class="dt">bs =</span> <span class="st">&quot;cs&quot;</span>)) <span class="op">+</span></span>
<span id="cb565-4"><a href="dv-ggplot2.html#cb565-4"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span>
<span id="cb565-5"><a href="dv-ggplot2.html#cb565-5"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">group =</span> cut, <span class="dt">color =</span> cut)) <span class="op">+</span></span>
<span id="cb565-6"><a href="dv-ggplot2.html#cb565-6"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb565-7"><a href="dv-ggplot2.html#cb565-7"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;gam&quot;</span>, <span class="dt">formula =</span> y <span class="op">~</span><span class="st"> </span><span class="kw">s</span>(x, <span class="dt">bs =</span> <span class="st">&quot;cs&quot;</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:group-facet"></span>
<img src="dv-ggplot2_files/figure-html/group-facet-1.png" alt="分组分面" width="70%" /><img src="dv-ggplot2_files/figure-html/group-facet-2.png" alt="分组配色" width="70%" />
<p class="caption">
图 12.11: 分组配色
</p>
</div>
<p>在分类散点图的另一种表示方法就是分面图，以 cut 变量作为分面的依据</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="dv-ggplot2.html#cb566-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span></span>
<span id="cb566-2"><a href="dv-ggplot2.html#cb566-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb566-3"><a href="dv-ggplot2.html#cb566-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter-facet"></span>
<img src="dv-ggplot2_files/figure-html/scatter-facet-1.png" alt="分面散点图" width="70%" />
<p class="caption">
图 12.12: 分面散点图
</p>
</div>
<p>给图 <a href="dv-ggplot2.html#fig:scatter-facet">12.12</a> 上色</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="dv-ggplot2.html#cb567-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span></span>
<span id="cb567-2"><a href="dv-ggplot2.html#cb567-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;steelblue&quot;</span>) <span class="op">+</span></span>
<span id="cb567-3"><a href="dv-ggplot2.html#cb567-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter-facet-color-1"></span>
<img src="dv-ggplot2_files/figure-html/scatter-facet-color-1-1.png" alt="给分面散点图上色" width="70%" />
<p class="caption">
图 12.13: 给分面散点图上色
</p>
</div>
<p>在图<a href="dv-ggplot2.html#fig:scatter-facet-color-1">12.13</a>的基础上，给不同的类上不同的颜色</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="dv-ggplot2.html#cb568-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">color =</span> cut)) <span class="op">+</span></span>
<span id="cb568-2"><a href="dv-ggplot2.html#cb568-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb568-3"><a href="dv-ggplot2.html#cb568-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter-facet-color-2"></span>
<img src="dv-ggplot2_files/figure-html/scatter-facet-color-2-1.png" alt="给不同的类上不同的颜色" width="70%" />
<p class="caption">
图 12.14: 给不同的类上不同的颜色
</p>
</div>
<p>去掉图例，此时图例属于冗余信息了</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="dv-ggplot2.html#cb569-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">color =</span> cut)) <span class="op">+</span></span>
<span id="cb569-2"><a href="dv-ggplot2.html#cb569-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb569-3"><a href="dv-ggplot2.html#cb569-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:scatter-facet-color-3"></span>
<img src="dv-ggplot2_files/figure-html/scatter-facet-color-3-1.png" alt="去掉图例" width="70%" />
<p class="caption">
图 12.15: 去掉图例
</p>
</div>
<p>四块土地，所施肥料不同，肥力大小顺序 4 &lt; 2 &lt; 3 &lt; 1 小麦产量随肥力的变化</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="dv-ggplot2.html#cb570-1"></a><span class="kw">data</span>(Wheat2, <span class="dt">package =</span> <span class="st">&quot;nlme&quot;</span>) <span class="co"># Wheat Yield Trials</span></span>
<span id="cb570-2"><a href="dv-ggplot2.html#cb570-2"></a><span class="kw">library</span>(colorspace)</span>
<span id="cb570-3"><a href="dv-ggplot2.html#cb570-3"></a><span class="kw">ggplot</span>(Wheat2, <span class="kw">aes</span>(longitude, latitude)) <span class="op">+</span></span>
<span id="cb570-4"><a href="dv-ggplot2.html#cb570-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> yield, <span class="dt">colour =</span> Block)) <span class="op">+</span></span>
<span id="cb570-5"><a href="dv-ggplot2.html#cb570-5"></a><span class="st">  </span><span class="kw">scale_color_discrete_sequential</span>(<span class="dt">palette =</span> <span class="st">&quot;Viridis&quot;</span>) <span class="op">+</span></span>
<span id="cb570-6"><a href="dv-ggplot2.html#cb570-6"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">30</span>, <span class="dv">5</span>)) <span class="op">+</span></span>
<span id="cb570-7"><a href="dv-ggplot2.html#cb570-7"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">10</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-16"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-16-1.png" alt="多个图例" width="70%" />
<p class="caption">
图 12.16: 多个图例
</p>
</div>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="dv-ggplot2.html#cb571-1"></a><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> hp, <span class="dt">y =</span> mpg, <span class="dt">color =</span> <span class="kw">factor</span>(am))) <span class="op">+</span></span>
<span id="cb571-2"><a href="dv-ggplot2.html#cb571-2"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:category-ggplot"></span>
<img src="dv-ggplot2_files/figure-html/category-ggplot-1.png" alt="分类散点图" width="70%" />
<p class="caption">
图 12.17: 分类散点图
</p>
</div>
<p>图层、分组、分面和散点图介绍完了，接下来就是其它统计图形，如箱线图，小提琴图和条形图</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="dv-ggplot2.html#cb572-1"></a>dat &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">cbind</span>(<span class="kw">rep</span>(<span class="dv">1948</span> <span class="op">+</span><span class="st"> </span><span class="kw">seq</span>(<span class="dv">12</span>), <span class="dt">each =</span> <span class="dv">12</span>), <span class="kw">rep</span>(<span class="kw">seq</span>(<span class="dv">12</span>), <span class="dv">12</span>), AirPassengers))</span>
<span id="cb572-2"><a href="dv-ggplot2.html#cb572-2"></a><span class="kw">colnames</span>(dat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;passengers&quot;</span>)</span>
<span id="cb572-3"><a href="dv-ggplot2.html#cb572-3"></a></span>
<span id="cb572-4"><a href="dv-ggplot2.html#cb572-4"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> dat, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.factor</span>(year), <span class="dt">y =</span> <span class="kw">as.factor</span>(month))) <span class="op">+</span></span>
<span id="cb572-5"><a href="dv-ggplot2.html#cb572-5"></a><span class="st">  </span><span class="kw">stat_sum</span>(<span class="kw">aes</span>(<span class="dt">size =</span> passengers), <span class="dt">colour =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="op">+</span></span>
<span id="cb572-6"><a href="dv-ggplot2.html#cb572-6"></a><span class="st">  </span><span class="kw">scale_size</span>(<span class="dt">range =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">10</span>), <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">100</span>, <span class="dv">650</span>, <span class="dv">50</span>)) <span class="op">+</span></span>
<span id="cb572-7"><a href="dv-ggplot2.html#cb572-7"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Month&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;Passengers&quot;</span>) <span class="op">+</span></span>
<span id="cb572-8"><a href="dv-ggplot2.html#cb572-8"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-17"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-17-1.png" alt="1948年至1960年航班乘客人数变化" width="70%" />
<p class="caption">
图 11.14: 1948年至1960年航班乘客人数变化
</p>
</div>
</div>
<div id="ggplot2-boxplot" class="section level3">
<h3><span class="header-section-number">12.2.2</span> 箱线图</h3>
<p>以 PlantGrowth 数据集为例展示箱线图，在两组不同实验条件下，植物生长的情况，纵坐标是干燥植物的量，横坐标表示不同的实验条件。这是非常典型的适合用箱线图来表达数据的场合，Y 轴对应数值型变量，X 轴对应分类变量，在 R 语言中，分类变量的类型是 factor</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="dv-ggplot2.html#cb573-1"></a><span class="kw">data</span>(<span class="st">&quot;PlantGrowth&quot;</span>)</span>
<span id="cb573-2"><a href="dv-ggplot2.html#cb573-2"></a><span class="kw">str</span>(PlantGrowth)</span>
<span id="cb573-3"><a href="dv-ggplot2.html#cb573-3"></a><span class="co">#&gt; &#39;data.frame&#39;:    30 obs. of  2 variables:</span></span>
<span id="cb573-4"><a href="dv-ggplot2.html#cb573-4"></a><span class="co">#&gt;  $ weight: num  4.17 5.58 5.18 6.11 4.5 4.61 5.17 4.53 5.33 5.14 ...</span></span>
<span id="cb573-5"><a href="dv-ggplot2.html#cb573-5"></a><span class="co">#&gt;  $ group : Factor w/ 3 levels &quot;ctrl&quot;,&quot;trt1&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</span></span></code></pre></div>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="dv-ggplot2.html#cb574-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> PlantGrowth, <span class="kw">aes</span>(<span class="dt">x =</span> group, <span class="dt">y =</span> weight)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>()</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/PlantGrowth-boxplot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>PlantGrowth 数据量比较小，此时比较适合采用抖动散点图，抖动是为了避免点之间相互重叠，为了增加不同类别之间的识别性，我们可以用不同的点的形状或者不同的颜色来表示类别</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="dv-ggplot2.html#cb575-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> PlantGrowth, <span class="kw">aes</span>(<span class="dt">x =</span> group, <span class="dt">y =</span> weight, <span class="dt">shape =</span> group)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>()</span>
<span id="cb575-2"><a href="dv-ggplot2.html#cb575-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> PlantGrowth, <span class="kw">aes</span>(<span class="dt">x =</span> group, <span class="dt">y =</span> weight, <span class="dt">color =</span> group)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>()</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/PlantGrowth-jitter-1.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/PlantGrowth-jitter-2.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="base">
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="dv-ggplot2.html#cb576-1"></a><span class="kw">boxplot</span>(weight <span class="op">~</span><span class="st"> </span>group,</span>
<span id="cb576-2"><a href="dv-ggplot2.html#cb576-2"></a>  <span class="dt">data =</span> PlantGrowth,</span>
<span id="cb576-3"><a href="dv-ggplot2.html#cb576-3"></a>  <span class="dt">ylab =</span> <span class="st">&quot;Dried weight of plants&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;lightgray&quot;</span>,</span>
<span id="cb576-4"><a href="dv-ggplot2.html#cb576-4"></a>  <span class="dt">notch =</span> <span class="ot">FALSE</span>, <span class="dt">varwidth =</span> <span class="ot">TRUE</span></span>
<span id="cb576-5"><a href="dv-ggplot2.html#cb576-5"></a>)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-19-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<p>以钻石切割质量 cut 为分面依据，以钻石颜色类别 color 为 x 轴，钻石价格为 y 轴，绘制箱线图<a href="dv-ggplot2.html#fig:boxplot-facet-color">12.18</a></p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="dv-ggplot2.html#cb577-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">y =</span> price, <span class="dt">color =</span> cut)) <span class="op">+</span></span>
<span id="cb577-2"><a href="dv-ggplot2.html#cb577-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb577-3"><a href="dv-ggplot2.html#cb577-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:boxplot-facet-color"></span>
<img src="dv-ggplot2_files/figure-html/boxplot-facet-color-1.png" alt="箱线图" width="70%" />
<p class="caption">
图 12.18: 箱线图
</p>
</div>
<p>我们当然还可以添加钻石的纯净度 clarity 作为分面依据，那么箱线图可以为图 <a href="dv-ggplot2.html#fig:boxplot-facet-color-clarity-1">12.19</a></p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="dv-ggplot2.html#cb578-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">y =</span> price, <span class="dt">color =</span> cut)) <span class="op">+</span></span>
<span id="cb578-2"><a href="dv-ggplot2.html#cb578-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb578-3"><a href="dv-ggplot2.html#cb578-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(clarity <span class="op">~</span><span class="st"> </span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:boxplot-facet-color-clarity-1"></span>
<img src="dv-ggplot2_files/figure-html/boxplot-facet-color-clarity-1-1.png" alt="复合分面箱线图" width="70%" />
<p class="caption">
图 12.19: 复合分面箱线图
</p>
</div>
<p>经过观察，我们发现水平分类过多，考虑用切割质量 cut 替换钻石颜色 color 绘图，但是由于分类过细，图信息展示不简练，反而不好，如图 <a href="dv-ggplot2.html#fig:boxplot-facet-color-clarity-2">12.20</a></p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="dv-ggplot2.html#cb579-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price, <span class="dt">color =</span> cut)) <span class="op">+</span></span>
<span id="cb579-2"><a href="dv-ggplot2.html#cb579-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb579-3"><a href="dv-ggplot2.html#cb579-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(clarity <span class="op">~</span><span class="st"> </span>color)</span>
<span id="cb579-4"><a href="dv-ggplot2.html#cb579-4"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price, <span class="dt">color =</span> color)) <span class="op">+</span></span>
<span id="cb579-5"><a href="dv-ggplot2.html#cb579-5"></a><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb579-6"><a href="dv-ggplot2.html#cb579-6"></a><span class="st">  </span><span class="kw">facet_grid</span>(clarity <span class="op">~</span><span class="st"> </span>color)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:boxplot-facet-color-clarity-2"></span>
<img src="dv-ggplot2_files/figure-html/boxplot-facet-color-clarity-2-1.png" alt="切割质量cut上色" width="70%" /><img src="dv-ggplot2_files/figure-html/boxplot-facet-color-clarity-2-2.png" alt="钻石颜色配色" width="70%" />
<p class="caption">
图 12.20: 钻石颜色配色
</p>
</div>
</div>
<div id="ggplot2-barplot" class="section level3">
<h3><span class="header-section-number">12.2.3</span> 条形图</h3>
<p>条形图特别适合分类变量的展示，我们这里展示钻石切割质量 cut 不同等级的数量，当然我们可以直接展示各类的数目，在图层 <code>geom_bar</code> 中指定 <code>stat="identity"</code></p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="dv-ggplot2.html#cb580-1"></a><span class="co"># 需要映射数据框的两个变量，相当于自己先计算了每类的数量</span></span>
<span id="cb580-2"><a href="dv-ggplot2.html#cb580-2"></a><span class="kw">with</span>(diamonds, <span class="kw">table</span>(cut))</span>
<span id="cb580-3"><a href="dv-ggplot2.html#cb580-3"></a><span class="co">#&gt; cut</span></span>
<span id="cb580-4"><a href="dv-ggplot2.html#cb580-4"></a><span class="co">#&gt;      Fair      Good Very Good   Premium     Ideal </span></span>
<span id="cb580-5"><a href="dv-ggplot2.html#cb580-5"></a><span class="co">#&gt;      1610      4906     12082     13791     21551</span></span>
<span id="cb580-6"><a href="dv-ggplot2.html#cb580-6"></a>cut_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">table</span>(diamonds<span class="op">$</span>cut))</span>
<span id="cb580-7"><a href="dv-ggplot2.html#cb580-7"></a><span class="kw">ggplot</span>(cut_df, <span class="kw">aes</span>(<span class="dt">x =</span> Var1, <span class="dt">y =</span> Freq)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-20-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="dv-ggplot2.html#cb581-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:diamonds-barplot-1"></span>
<img src="dv-ggplot2_files/figure-html/diamonds-barplot-1-1.png" alt="频数条形图" width="70%" />
<p class="caption">
图 12.21: 频数条形图
</p>
</div>
<p>还有另外三种表示方法</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="dv-ggplot2.html#cb582-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb582-2"><a href="dv-ggplot2.html#cb582-2"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> ..count..)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>()</span>
<span id="cb582-3"><a href="dv-ggplot2.html#cb582-3"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> <span class="kw">stat</span>(count))) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>()</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-21-1.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-21-2.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-21-3.png" width="70%" style="display: block; margin: auto;" /></p>
<p>我们还可以在图 <a href="dv-ggplot2.html#fig:diamonds-barplot-1">12.21</a> 的基础上再添加一个分类变量钻石的纯净度 clarity，形成堆积条形图</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="dv-ggplot2.html#cb583-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">fill =</span> clarity)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:diamonds-barplot-2"></span>
<img src="dv-ggplot2_files/figure-html/diamonds-barplot-2-1.png" alt="堆积条形图" width="70%" />
<p class="caption">
图 12.22: 堆积条形图
</p>
</div>
<p>再添加一个分类变量钻石颜色 color 比较好的做法是分面</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="dv-ggplot2.html#cb584-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">fill =</span> clarity)) <span class="op">+</span></span>
<span id="cb584-2"><a href="dv-ggplot2.html#cb584-2"></a><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span></span>
<span id="cb584-3"><a href="dv-ggplot2.html#cb584-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:diamonds-barplot-3"></span>
<img src="dv-ggplot2_files/figure-html/diamonds-barplot-3-1.png" alt="分面堆积条形图" width="70%" />
<p class="caption">
图 12.23: 分面堆积条形图
</p>
</div>
<p>实际上，绘制图<a href="dv-ggplot2.html#fig:diamonds-barplot-3">12.23</a>包含了对分类变量的分组计数过程，如下</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="dv-ggplot2.html#cb585-1"></a><span class="kw">with</span>(diamonds, <span class="kw">table</span>(cut, color))</span>
<span id="cb585-2"><a href="dv-ggplot2.html#cb585-2"></a><span class="co">#&gt;            color</span></span>
<span id="cb585-3"><a href="dv-ggplot2.html#cb585-3"></a><span class="co">#&gt; cut            D    E    F    G    H    I    J</span></span>
<span id="cb585-4"><a href="dv-ggplot2.html#cb585-4"></a><span class="co">#&gt;   Fair       163  224  312  314  303  175  119</span></span>
<span id="cb585-5"><a href="dv-ggplot2.html#cb585-5"></a><span class="co">#&gt;   Good       662  933  909  871  702  522  307</span></span>
<span id="cb585-6"><a href="dv-ggplot2.html#cb585-6"></a><span class="co">#&gt;   Very Good 1513 2400 2164 2299 1824 1204  678</span></span>
<span id="cb585-7"><a href="dv-ggplot2.html#cb585-7"></a><span class="co">#&gt;   Premium   1603 2337 2331 2924 2360 1428  808</span></span>
<span id="cb585-8"><a href="dv-ggplot2.html#cb585-8"></a><span class="co">#&gt;   Ideal     2834 3903 3826 4884 3115 2093  896</span></span></code></pre></div>
<p>还有一种堆积的方法是按比例，而不是按数量，如图<a href="dv-ggplot2.html#fig:diamonds-barplot-4">12.24</a></p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="dv-ggplot2.html#cb586-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">fill =</span> clarity)) <span class="op">+</span></span>
<span id="cb586-2"><a href="dv-ggplot2.html#cb586-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>) <span class="op">+</span></span>
<span id="cb586-3"><a href="dv-ggplot2.html#cb586-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:diamonds-barplot-4"></span>
<img src="dv-ggplot2_files/figure-html/diamonds-barplot-4-1.png" alt="比例堆积条形图" width="70%" />
<p class="caption">
图 12.24: 比例堆积条形图
</p>
</div>
<p>接下来就是复合条形图</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="dv-ggplot2.html#cb587-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">fill =</span> clarity)) <span class="op">+</span></span>
<span id="cb587-2"><a href="dv-ggplot2.html#cb587-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:diamonds-barplot-5"></span>
<img src="dv-ggplot2_files/figure-html/diamonds-barplot-5-1.png" alt="复合条形图" width="70%" />
<p class="caption">
图 12.25: 复合条形图
</p>
</div>
<p>再添加一个分类变量，就是需要分面大法了，图 <a href="dv-ggplot2.html#fig:diamonds-barplot-5">12.25</a> 展示了三个分类变量，其实我们还可以再添加一个分类变量用作分面的列依据</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="dv-ggplot2.html#cb588-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">fill =</span> clarity)) <span class="op">+</span></span>
<span id="cb588-2"><a href="dv-ggplot2.html#cb588-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="op">+</span></span>
<span id="cb588-3"><a href="dv-ggplot2.html#cb588-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="dt">rows =</span> <span class="kw">vars</span>(cut))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:diamonds-barplot-6"></span>
<img src="dv-ggplot2_files/figure-html/diamonds-barplot-6-1.png" alt="分面复合条形图" width="70%" />
<p class="caption">
图 12.26: 分面复合条形图
</p>
</div>
<p>图 <a href="dv-ggplot2.html#fig:diamonds-barplot-6">12.26</a> 展示的数据如下</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="dv-ggplot2.html#cb589-1"></a><span class="kw">with</span>(diamonds, <span class="kw">table</span>(color, clarity, cut))</span>
<span id="cb589-2"><a href="dv-ggplot2.html#cb589-2"></a><span class="co">#&gt; , , cut = Fair</span></span>
<span id="cb589-3"><a href="dv-ggplot2.html#cb589-3"></a><span class="co">#&gt; </span></span>
<span id="cb589-4"><a href="dv-ggplot2.html#cb589-4"></a><span class="co">#&gt;      clarity</span></span>
<span id="cb589-5"><a href="dv-ggplot2.html#cb589-5"></a><span class="co">#&gt; color   I1  SI2  SI1  VS2  VS1 VVS2 VVS1   IF</span></span>
<span id="cb589-6"><a href="dv-ggplot2.html#cb589-6"></a><span class="co">#&gt;     D    4   56   58   25    5    9    3    3</span></span>
<span id="cb589-7"><a href="dv-ggplot2.html#cb589-7"></a><span class="co">#&gt;     E    9   78   65   42   14   13    3    0</span></span>
<span id="cb589-8"><a href="dv-ggplot2.html#cb589-8"></a><span class="co">#&gt;     F   35   89   83   53   33   10    5    4</span></span>
<span id="cb589-9"><a href="dv-ggplot2.html#cb589-9"></a><span class="co">#&gt;     G   53   80   69   45   45   17    3    2</span></span>
<span id="cb589-10"><a href="dv-ggplot2.html#cb589-10"></a><span class="co">#&gt;     H   52   91   75   41   32   11    1    0</span></span>
<span id="cb589-11"><a href="dv-ggplot2.html#cb589-11"></a><span class="co">#&gt;     I   34   45   30   32   25    8    1    0</span></span>
<span id="cb589-12"><a href="dv-ggplot2.html#cb589-12"></a><span class="co">#&gt;     J   23   27   28   23   16    1    1    0</span></span>
<span id="cb589-13"><a href="dv-ggplot2.html#cb589-13"></a><span class="co">#&gt; </span></span>
<span id="cb589-14"><a href="dv-ggplot2.html#cb589-14"></a><span class="co">#&gt; , , cut = Good</span></span>
<span id="cb589-15"><a href="dv-ggplot2.html#cb589-15"></a><span class="co">#&gt; </span></span>
<span id="cb589-16"><a href="dv-ggplot2.html#cb589-16"></a><span class="co">#&gt;      clarity</span></span>
<span id="cb589-17"><a href="dv-ggplot2.html#cb589-17"></a><span class="co">#&gt; color   I1  SI2  SI1  VS2  VS1 VVS2 VVS1   IF</span></span>
<span id="cb589-18"><a href="dv-ggplot2.html#cb589-18"></a><span class="co">#&gt;     D    8  223  237  104   43   25   13    9</span></span>
<span id="cb589-19"><a href="dv-ggplot2.html#cb589-19"></a><span class="co">#&gt;     E   23  202  355  160   89   52   43    9</span></span>
<span id="cb589-20"><a href="dv-ggplot2.html#cb589-20"></a><span class="co">#&gt;     F   19  201  273  184  132   50   35   15</span></span>
<span id="cb589-21"><a href="dv-ggplot2.html#cb589-21"></a><span class="co">#&gt;     G   19  163  207  192  152   75   41   22</span></span>
<span id="cb589-22"><a href="dv-ggplot2.html#cb589-22"></a><span class="co">#&gt;     H   14  158  235  138   77   45   31    4</span></span>
<span id="cb589-23"><a href="dv-ggplot2.html#cb589-23"></a><span class="co">#&gt;     I    9   81  165  110  103   26   22    6</span></span>
<span id="cb589-24"><a href="dv-ggplot2.html#cb589-24"></a><span class="co">#&gt;     J    4   53   88   90   52   13    1    6</span></span>
<span id="cb589-25"><a href="dv-ggplot2.html#cb589-25"></a><span class="co">#&gt; </span></span>
<span id="cb589-26"><a href="dv-ggplot2.html#cb589-26"></a><span class="co">#&gt; , , cut = Very Good</span></span>
<span id="cb589-27"><a href="dv-ggplot2.html#cb589-27"></a><span class="co">#&gt; </span></span>
<span id="cb589-28"><a href="dv-ggplot2.html#cb589-28"></a><span class="co">#&gt;      clarity</span></span>
<span id="cb589-29"><a href="dv-ggplot2.html#cb589-29"></a><span class="co">#&gt; color   I1  SI2  SI1  VS2  VS1 VVS2 VVS1   IF</span></span>
<span id="cb589-30"><a href="dv-ggplot2.html#cb589-30"></a><span class="co">#&gt;     D    5  314  494  309  175  141   52   23</span></span>
<span id="cb589-31"><a href="dv-ggplot2.html#cb589-31"></a><span class="co">#&gt;     E   22  445  626  503  293  298  170   43</span></span>
<span id="cb589-32"><a href="dv-ggplot2.html#cb589-32"></a><span class="co">#&gt;     F   13  343  559  466  293  249  174   67</span></span>
<span id="cb589-33"><a href="dv-ggplot2.html#cb589-33"></a><span class="co">#&gt;     G   16  327  474  479  432  302  190   79</span></span>
<span id="cb589-34"><a href="dv-ggplot2.html#cb589-34"></a><span class="co">#&gt;     H   12  343  547  376  257  145  115   29</span></span>
<span id="cb589-35"><a href="dv-ggplot2.html#cb589-35"></a><span class="co">#&gt;     I    8  200  358  274  205   71   69   19</span></span>
<span id="cb589-36"><a href="dv-ggplot2.html#cb589-36"></a><span class="co">#&gt;     J    8  128  182  184  120   29   19    8</span></span>
<span id="cb589-37"><a href="dv-ggplot2.html#cb589-37"></a><span class="co">#&gt; </span></span>
<span id="cb589-38"><a href="dv-ggplot2.html#cb589-38"></a><span class="co">#&gt; , , cut = Premium</span></span>
<span id="cb589-39"><a href="dv-ggplot2.html#cb589-39"></a><span class="co">#&gt; </span></span>
<span id="cb589-40"><a href="dv-ggplot2.html#cb589-40"></a><span class="co">#&gt;      clarity</span></span>
<span id="cb589-41"><a href="dv-ggplot2.html#cb589-41"></a><span class="co">#&gt; color   I1  SI2  SI1  VS2  VS1 VVS2 VVS1   IF</span></span>
<span id="cb589-42"><a href="dv-ggplot2.html#cb589-42"></a><span class="co">#&gt;     D   12  421  556  339  131   94   40   10</span></span>
<span id="cb589-43"><a href="dv-ggplot2.html#cb589-43"></a><span class="co">#&gt;     E   30  519  614  629  292  121  105   27</span></span>
<span id="cb589-44"><a href="dv-ggplot2.html#cb589-44"></a><span class="co">#&gt;     F   34  523  608  619  290  146   80   31</span></span>
<span id="cb589-45"><a href="dv-ggplot2.html#cb589-45"></a><span class="co">#&gt;     G   46  492  566  721  566  275  171   87</span></span>
<span id="cb589-46"><a href="dv-ggplot2.html#cb589-46"></a><span class="co">#&gt;     H   46  521  655  532  336  118  112   40</span></span>
<span id="cb589-47"><a href="dv-ggplot2.html#cb589-47"></a><span class="co">#&gt;     I   24  312  367  315  221   82   84   23</span></span>
<span id="cb589-48"><a href="dv-ggplot2.html#cb589-48"></a><span class="co">#&gt;     J   13  161  209  202  153   34   24   12</span></span>
<span id="cb589-49"><a href="dv-ggplot2.html#cb589-49"></a><span class="co">#&gt; </span></span>
<span id="cb589-50"><a href="dv-ggplot2.html#cb589-50"></a><span class="co">#&gt; , , cut = Ideal</span></span>
<span id="cb589-51"><a href="dv-ggplot2.html#cb589-51"></a><span class="co">#&gt; </span></span>
<span id="cb589-52"><a href="dv-ggplot2.html#cb589-52"></a><span class="co">#&gt;      clarity</span></span>
<span id="cb589-53"><a href="dv-ggplot2.html#cb589-53"></a><span class="co">#&gt; color   I1  SI2  SI1  VS2  VS1 VVS2 VVS1   IF</span></span>
<span id="cb589-54"><a href="dv-ggplot2.html#cb589-54"></a><span class="co">#&gt;     D   13  356  738  920  351  284  144   28</span></span>
<span id="cb589-55"><a href="dv-ggplot2.html#cb589-55"></a><span class="co">#&gt;     E   18  469  766 1136  593  507  335   79</span></span>
<span id="cb589-56"><a href="dv-ggplot2.html#cb589-56"></a><span class="co">#&gt;     F   42  453  608  879  616  520  440  268</span></span>
<span id="cb589-57"><a href="dv-ggplot2.html#cb589-57"></a><span class="co">#&gt;     G   16  486  660  910  953  774  594  491</span></span>
<span id="cb589-58"><a href="dv-ggplot2.html#cb589-58"></a><span class="co">#&gt;     H   38  450  763  556  467  289  326  226</span></span>
<span id="cb589-59"><a href="dv-ggplot2.html#cb589-59"></a><span class="co">#&gt;     I   17  274  504  438  408  178  179   95</span></span>
<span id="cb589-60"><a href="dv-ggplot2.html#cb589-60"></a><span class="co">#&gt;     J    2  110  243  232  201   54   29   25</span></span></code></pre></div>
</div>
<div id="ggplot2-line" class="section level3">
<h3><span class="header-section-number">12.2.4</span> 折线图</h3>
<p>时间序列数据的展示，时序图</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="dv-ggplot2.html#cb590-1"></a><span class="kw">ggplot</span>(economics, <span class="kw">aes</span>(date, unemploy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-24"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-24-1.png" alt="时序图" width="70%" />
<p class="caption">
图 11.23: 时序图
</p>
</div>
</div>
<div id="ggplot2-histogram" class="section level3">
<h3><span class="header-section-number">12.2.5</span> 直方图</h3>
<p>直方图用来查看连续变量的分布</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="dv-ggplot2.html#cb591-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(price)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">30</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-25"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-25-1.png" alt="钻石价格的分布" width="70%" />
<p class="caption">
图 11.24: 钻石价格的分布
</p>
</div>
<p>堆积直方图</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="dv-ggplot2.html#cb592-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> price, <span class="dt">fill =</span> cut)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">30</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-26"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-26-1.png" alt="钻石价格随切割质量的分布" width="70%" />
<p class="caption">
图 12.27: 钻石价格随切割质量的分布
</p>
</div>
<p>基础 R 包与 Ggplot2 包绘制的直方图的对比，Base R 绘图速度快，代码更加稳定，Ggplot2 代码简洁，更美观</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="dv-ggplot2.html#cb593-1"></a><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="fl">2.1</span>, <span class="fl">2.1</span>, <span class="fl">1.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb593-2"><a href="dv-ggplot2.html#cb593-2"></a><span class="kw">plot</span>(<span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">350</span>), <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">10</span>),</span>
<span id="cb593-3"><a href="dv-ggplot2.html#cb593-3"></a>  <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">font.main =</span> <span class="dv">1</span>,</span>
<span id="cb593-4"><a href="dv-ggplot2.html#cb593-4"></a>  <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;&quot;</span>, <span class="dt">frame.plot =</span> <span class="ot">FALSE</span>, <span class="dt">axes =</span> <span class="ot">FALSE</span>,</span>
<span id="cb593-5"><a href="dv-ggplot2.html#cb593-5"></a>  <span class="co"># xlab = &quot;hp&quot;, ylab = &quot;Frequency&quot;,</span></span>
<span id="cb593-6"><a href="dv-ggplot2.html#cb593-6"></a>  <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">&quot;Histogram with Base R&quot;</span>, <span class="kw">paste</span>(<span class="kw">rep</span>(<span class="st">&quot; &quot;</span>, <span class="dv">60</span>), <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb593-7"><a href="dv-ggplot2.html#cb593-7"></a>)</span>
<span id="cb593-8"><a href="dv-ggplot2.html#cb593-8"></a><span class="kw">axis</span>(</span>
<span id="cb593-9"><a href="dv-ggplot2.html#cb593-9"></a>  <span class="dt">side =</span> <span class="dv">1</span>, <span class="dt">at =</span> <span class="kw">seq</span>(<span class="dv">50</span>, <span class="dv">350</span>, <span class="dv">50</span>), <span class="dt">labels =</span> <span class="kw">seq</span>(<span class="dv">50</span>, <span class="dv">350</span>, <span class="dv">50</span>),</span>
<span id="cb593-10"><a href="dv-ggplot2.html#cb593-10"></a>  <span class="dt">tick =</span> <span class="ot">FALSE</span>, <span class="dt">las =</span> <span class="dv">1</span>, <span class="dt">padj =</span> <span class="dv">0</span>, <span class="dt">mgp =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="fl">0.1</span>, <span class="dv">0</span>)</span>
<span id="cb593-11"><a href="dv-ggplot2.html#cb593-11"></a>)</span>
<span id="cb593-12"><a href="dv-ggplot2.html#cb593-12"></a><span class="kw">axis</span>(</span>
<span id="cb593-13"><a href="dv-ggplot2.html#cb593-13"></a>  <span class="dt">side =</span> <span class="dv">2</span>, <span class="dt">at =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>), <span class="dt">labels =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>),</span>
<span id="cb593-14"><a href="dv-ggplot2.html#cb593-14"></a>  <span class="co"># col = &quot;white&quot;, 坐标轴的颜色</span></span>
<span id="cb593-15"><a href="dv-ggplot2.html#cb593-15"></a>  <span class="co"># col.ticks 刻度线的颜色</span></span>
<span id="cb593-16"><a href="dv-ggplot2.html#cb593-16"></a>  <span class="dt">tick =</span> <span class="ot">FALSE</span>, <span class="co"># 取消刻度线</span></span>
<span id="cb593-17"><a href="dv-ggplot2.html#cb593-17"></a>  <span class="dt">las =</span> <span class="dv">1</span>, <span class="co"># 水平方向</span></span>
<span id="cb593-18"><a href="dv-ggplot2.html#cb593-18"></a>  <span class="dt">hadj =</span> <span class="dv">1</span>, <span class="co"># 右侧对齐</span></span>
<span id="cb593-19"><a href="dv-ggplot2.html#cb593-19"></a>  <span class="dt">mgp =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="fl">0.1</span>, <span class="dv">0</span>) <span class="co"># 纵轴边距线设置为 0.1</span></span>
<span id="cb593-20"><a href="dv-ggplot2.html#cb593-20"></a>)</span>
<span id="cb593-21"><a href="dv-ggplot2.html#cb593-21"></a><span class="kw">abline</span>(<span class="dt">h =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>), <span class="dt">v =</span> <span class="kw">seq</span>(<span class="dv">50</span>, <span class="dv">350</span>, <span class="dv">50</span>), <span class="dt">col =</span> <span class="st">&quot;gray90&quot;</span>, <span class="dt">lty =</span> <span class="st">&quot;solid&quot;</span>)</span>
<span id="cb593-22"><a href="dv-ggplot2.html#cb593-22"></a><span class="kw">abline</span>(<span class="dt">h =</span> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">2</span>), <span class="dt">v =</span> <span class="kw">seq</span>(<span class="dv">75</span>, <span class="dv">325</span>, <span class="dv">50</span>), <span class="dt">col =</span> <span class="st">&quot;gray95&quot;</span>, <span class="dt">lty =</span> <span class="st">&quot;solid&quot;</span>)</span>
<span id="cb593-23"><a href="dv-ggplot2.html#cb593-23"></a><span class="kw">hist</span>(mtcars<span class="op">$</span>hp,</span>
<span id="cb593-24"><a href="dv-ggplot2.html#cb593-24"></a>  <span class="dt">col =</span> <span class="st">&quot;#56B4E9&quot;</span>, <span class="dt">border =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb593-25"><a href="dv-ggplot2.html#cb593-25"></a>  <span class="dt">freq =</span> <span class="ot">TRUE</span>, <span class="dt">add =</span> <span class="ot">TRUE</span></span>
<span id="cb593-26"><a href="dv-ggplot2.html#cb593-26"></a>  <span class="co"># labels = TRUE, axes = TRUE, ylim = c(0, 10.5),</span></span>
<span id="cb593-27"><a href="dv-ggplot2.html#cb593-27"></a>  <span class="co"># xlab = &quot;hp&quot;,main = &quot;Histogram with Base R&quot;</span></span>
<span id="cb593-28"><a href="dv-ggplot2.html#cb593-28"></a>)</span>
<span id="cb593-29"><a href="dv-ggplot2.html#cb593-29"></a><span class="kw">mtext</span>(<span class="st">&quot;hp&quot;</span>, <span class="dv">1</span>, <span class="dt">line =</span> <span class="fl">1.0</span>)</span>
<span id="cb593-30"><a href="dv-ggplot2.html#cb593-30"></a><span class="kw">mtext</span>(<span class="st">&quot;Frequency&quot;</span>, <span class="dv">2</span>, <span class="dt">line =</span> <span class="fl">1.0</span>)</span>
<span id="cb593-31"><a href="dv-ggplot2.html#cb593-31"></a></span>
<span id="cb593-32"><a href="dv-ggplot2.html#cb593-32"></a><span class="kw">ggplot</span>(mtcars) <span class="op">+</span></span>
<span id="cb593-33"><a href="dv-ggplot2.html#cb593-33"></a><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x =</span> hp), <span class="dt">fill =</span> <span class="st">&quot;#56B4E9&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">50</span>, <span class="dv">350</span>, <span class="dv">50</span>)) <span class="op">+</span></span>
<span id="cb593-34"><a href="dv-ggplot2.html#cb593-34"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">50</span>, <span class="dv">350</span>, <span class="dv">50</span>)) <span class="op">+</span></span>
<span id="cb593-35"><a href="dv-ggplot2.html#cb593-35"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">12</span>, <span class="dv">2</span>)) <span class="op">+</span></span>
<span id="cb593-36"><a href="dv-ggplot2.html#cb593-36"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;hp&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Histogram with Ggplot2&quot;</span>) <span class="op">+</span></span>
<span id="cb593-37"><a href="dv-ggplot2.html#cb593-37"></a><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dt">base_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-27"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-27-1.png" alt="直方图" width="70%" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-27-2.png" alt="直方图" width="70%" />
<p class="caption">
图 11.25: 直方图
</p>
</div>
</div>
<div id="ggplot2-violin" class="section level3">
<h3><span class="header-section-number">12.2.6</span> 提琴图</h3>
<p>提琴图</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="dv-ggplot2.html#cb594-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>()</span>
<span id="cb594-2"><a href="dv-ggplot2.html#cb594-2"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_violin</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:violin"></span>
<img src="dv-ggplot2_files/figure-html/violin-1.png" alt="箱线图" width="70%" /><img src="dv-ggplot2_files/figure-html/violin-2.png" alt="小提琴图" width="70%" />
<p class="caption">
图 12.28: 小提琴图
</p>
</div>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="dv-ggplot2.html#cb595-1"></a><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(class, cty)) <span class="op">+</span></span>
<span id="cb595-2"><a href="dv-ggplot2.html#cb595-2"></a><span class="st">  </span><span class="kw">geom_violin</span>() <span class="op">+</span></span>
<span id="cb595-3"><a href="dv-ggplot2.html#cb595-3"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb595-4"><a href="dv-ggplot2.html#cb595-4"></a>    <span class="dt">title =</span> <span class="st">&quot;Violin plot&quot;</span>,</span>
<span id="cb595-5"><a href="dv-ggplot2.html#cb595-5"></a>    <span class="dt">subtitle =</span> <span class="st">&quot;City Mileage vs Class of vehicle&quot;</span>,</span>
<span id="cb595-6"><a href="dv-ggplot2.html#cb595-6"></a>    <span class="dt">caption =</span> <span class="st">&quot;Source: mpg&quot;</span>,</span>
<span id="cb595-7"><a href="dv-ggplot2.html#cb595-7"></a>    <span class="dt">x =</span> <span class="st">&quot;Class of Vehicle&quot;</span>,</span>
<span id="cb595-8"><a href="dv-ggplot2.html#cb595-8"></a>    <span class="dt">y =</span> <span class="st">&quot;City Mileage&quot;</span></span>
<span id="cb595-9"><a href="dv-ggplot2.html#cb595-9"></a>  )</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:violin-mpg"></span>
<img src="dv-ggplot2_files/figure-html/violin-mpg-1.png" alt="城市里程与车辆类别" width="70%" />
<p class="caption">
图 12.29: 城市里程与车辆类别
</p>
</div>
<p>蜂群图 <a href="https://github.com/eclarke/ggbeeswarm">ggbeeswarm</a> 是分类散点图加箱线图的合体</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="dv-ggplot2.html#cb596-1"></a><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> class, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span></span>
<span id="cb596-2"><a href="dv-ggplot2.html#cb596-2"></a><span class="st">  </span>ggbeeswarm<span class="op">::</span><span class="kw">geom_quasirandom</span>()</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-28-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggplot2-jitter" class="section level3">
<h3><span class="header-section-number">12.2.7</span> 抖动图</h3>
<p>抖动图适合数据量比较小的情况</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="dv-ggplot2.html#cb597-1"></a><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> class, <span class="dt">y =</span> hwy, <span class="dt">color =</span> class)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>()</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-29-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>抖不抖，还是抖一下</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="dv-ggplot2.html#cb598-1"></a><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span></span>
<span id="cb598-2"><a href="dv-ggplot2.html#cb598-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Species), <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">colour =</span> <span class="st">&quot;grey20&quot;</span>) <span class="op">+</span></span>
<span id="cb598-3"><a href="dv-ggplot2.html#cb598-3"></a><span class="st">  </span><span class="co"># geom_boxplot(outlier.colour = NA, fill = NA, colour = &quot;grey20&quot;) +</span></span>
<span id="cb598-4"><a href="dv-ggplot2.html#cb598-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Not Jittered&quot;</span>)</span>
<span id="cb598-5"><a href="dv-ggplot2.html#cb598-5"></a></span>
<span id="cb598-6"><a href="dv-ggplot2.html#cb598-6"></a><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span></span>
<span id="cb598-7"><a href="dv-ggplot2.html#cb598-7"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Species),</span>
<span id="cb598-8"><a href="dv-ggplot2.html#cb598-8"></a>    <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">colour =</span> <span class="st">&quot;grey20&quot;</span>,</span>
<span id="cb598-9"><a href="dv-ggplot2.html#cb598-9"></a>    <span class="dt">position =</span> <span class="kw">position_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">height =</span> <span class="fl">0.1</span>)</span>
<span id="cb598-10"><a href="dv-ggplot2.html#cb598-10"></a>  ) <span class="op">+</span></span>
<span id="cb598-11"><a href="dv-ggplot2.html#cb598-11"></a><span class="st">  </span><span class="co"># geom_boxplot(outlier.colour = NA, fill = NA, colour = &quot;grey20&quot;) +</span></span>
<span id="cb598-12"><a href="dv-ggplot2.html#cb598-12"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Jittered&quot;</span>)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-30-1.png" width="70%" style="display: block; margin: auto;" /><img src="dv-ggplot2_files/figure-html/unnamed-chunk-30-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>在数据量比较大的时候，可以用箱线图、密度图、提琴图</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="dv-ggplot2.html#cb599-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> cut, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-31"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-31-1.png" alt="抖动图的反例" width="70%" />
<p class="caption">
图 12.30: 抖动图的反例
</p>
</div>
<p>上色和分面都不好使的抖动图，因为区分度变小</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="dv-ggplot2.html#cb600-1"></a><span class="kw">ggplot</span>(sub_diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">y =</span> price, <span class="dt">color =</span> color)) <span class="op">+</span></span>
<span id="cb600-2"><a href="dv-ggplot2.html#cb600-2"></a><span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span></span>
<span id="cb600-3"><a href="dv-ggplot2.html#cb600-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(clarity <span class="op">~</span><span class="st"> </span>cut)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-32"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-32-1.png" alt="根据钻石颜色上色" width="70%" />
<p class="caption">
图 11.26: 根据钻石颜色上色
</p>
</div>
<p>箱线图此时不宜分的过细</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="dv-ggplot2.html#cb601-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">y =</span> price, <span class="dt">color =</span> color)) <span class="op">+</span></span>
<span id="cb601-2"><a href="dv-ggplot2.html#cb601-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></span>
<span id="cb601-3"><a href="dv-ggplot2.html#cb601-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(cut <span class="op">~</span><span class="st"> </span>clarity)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:boxplot-facet-cut-clarity"></span>
<img src="dv-ggplot2_files/figure-html/boxplot-facet-cut-clarity-1.png" alt="箱线图" width="70%" />
<p class="caption">
图 12.31: 箱线图
</p>
</div>
<p>所以这样更好，先按纯净度分面，再对比不同的颜色，钻石价格的差异</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="dv-ggplot2.html#cb602-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">y =</span> price, <span class="dt">color =</span> color)) <span class="op">+</span></span>
<span id="cb602-2"><a href="dv-ggplot2.html#cb602-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></span>
<span id="cb602-3"><a href="dv-ggplot2.html#cb602-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>clarity)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:boxplot-facet-clarity"></span>
<img src="dv-ggplot2_files/figure-html/boxplot-facet-clarity-1.png" alt="钻石按纯净度分面" width="70%" />
<p class="caption">
图 12.32: 钻石按纯净度分面
</p>
</div>
<p>最好只比较一个维度，不同颜色钻石的价格对比</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="dv-ggplot2.html#cb603-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">y =</span> price, <span class="dt">color =</span> color)) <span class="op">+</span></span>
<span id="cb603-2"><a href="dv-ggplot2.html#cb603-2"></a><span class="st">  </span><span class="kw">geom_boxplot</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:boxplot-color"></span>
<img src="dv-ggplot2_files/figure-html/boxplot-color-1.png" alt="不同颜色钻石的价格比较" width="70%" />
<p class="caption">
图 12.33: 不同颜色钻石的价格比较
</p>
</div>
</div>
<div id="ggplot2-ridge" class="section level3">
<h3><span class="header-section-number">12.2.8</span> 密度图</h3>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb604-1"><a href="dv-ggplot2.html#cb604-1"></a><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(cty)) <span class="op">+</span></span>
<span id="cb604-2"><a href="dv-ggplot2.html#cb604-2"></a><span class="st">  </span><span class="kw">geom_density</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> <span class="kw">factor</span>(cyl)), <span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb604-3"><a href="dv-ggplot2.html#cb604-3"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb604-4"><a href="dv-ggplot2.html#cb604-4"></a>    <span class="dt">title =</span> <span class="st">&quot;Density plot&quot;</span>,</span>
<span id="cb604-5"><a href="dv-ggplot2.html#cb604-5"></a>    <span class="dt">subtitle =</span> <span class="st">&quot;City Mileage Grouped by Number of cylinders&quot;</span>,</span>
<span id="cb604-6"><a href="dv-ggplot2.html#cb604-6"></a>    <span class="dt">caption =</span> <span class="st">&quot;Source: mpg&quot;</span>,</span>
<span id="cb604-7"><a href="dv-ggplot2.html#cb604-7"></a>    <span class="dt">x =</span> <span class="st">&quot;City Mileage&quot;</span>,</span>
<span id="cb604-8"><a href="dv-ggplot2.html#cb604-8"></a>    <span class="dt">fill =</span> <span class="st">&quot;# Cylinders&quot;</span></span>
<span id="cb604-9"><a href="dv-ggplot2.html#cb604-9"></a>  )</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:mpg-cyl-density"></span>
<img src="dv-ggplot2_files/figure-html/mpg-cyl-density-1.png" alt="按汽缸数分组的城市里程" width="70%" />
<p class="caption">
图 12.34: 按汽缸数分组的城市里程
</p>
</div>
<p>添加透明度，解决遮挡</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="dv-ggplot2.html#cb605-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> price, <span class="dt">fill =</span> cut)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>()</span>
<span id="cb605-2"><a href="dv-ggplot2.html#cb605-2"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> price, <span class="dt">fill =</span> cut)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:density"></span>
<img src="dv-ggplot2_files/figure-html/density-1.png" alt="密度图" width="70%" /><img src="dv-ggplot2_files/figure-html/density-2.png" alt="添加透明度的密度图" width="70%" />
<p class="caption">
图 12.35: 添加透明度的密度图
</p>
</div>
<p>堆积密度图</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="dv-ggplot2.html#cb606-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> price, <span class="dt">fill =</span> cut)) <span class="op">+</span></span>
<span id="cb606-2"><a href="dv-ggplot2.html#cb606-2"></a><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">position =</span> <span class="st">&quot;stack&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:stack-density"></span>
<img src="dv-ggplot2_files/figure-html/stack-density-1.png" alt="堆积密度图" width="70%" />
<p class="caption">
图 12.36: 堆积密度图
</p>
</div>
<p>条件密度估计</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="dv-ggplot2.html#cb607-1"></a><span class="co"># You can use position=&quot;fill&quot; to produce a conditional density estimate</span></span>
<span id="cb607-2"><a href="dv-ggplot2.html#cb607-2"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(carat, <span class="kw">stat</span>(count), <span class="dt">fill =</span> cut)) <span class="op">+</span></span>
<span id="cb607-3"><a href="dv-ggplot2.html#cb607-3"></a><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-33"></span>
<img src="dv-ggplot2_files/figure-html/unnamed-chunk-33-1.png" alt="条件密度估计图" width="70%" />
<p class="caption">
图 11.27: 条件密度估计图
</p>
</div>
<p>岭线图是密度图的一种变体，可以防止密度曲线重叠在一起</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="dv-ggplot2.html#cb608-1"></a><span class="kw">ggplot</span>(diamonds) <span class="op">+</span></span>
<span id="cb608-2"><a href="dv-ggplot2.html#cb608-2"></a><span class="st">  </span>ggridges<span class="op">::</span><span class="kw">geom_density_ridges</span>(<span class="kw">aes</span>(<span class="dt">x =</span> price, <span class="dt">y =</span> color, <span class="dt">fill =</span> color))</span>
<span id="cb608-3"><a href="dv-ggplot2.html#cb608-3"></a><span class="co">#&gt; Picking joint bandwidth of 535</span></span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-34-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>二维的密度图又是一种延伸</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="dv-ggplot2.html#cb609-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span></span>
<span id="cb609-2"><a href="dv-ggplot2.html#cb609-2"></a><span class="st">  </span><span class="kw">geom_density_2d</span>(<span class="kw">aes</span>(<span class="dt">color =</span> cut)) <span class="op">+</span></span>
<span id="cb609-3"><a href="dv-ggplot2.html#cb609-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>cut)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-35-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><code>stat</code> 函数，特别是 nlevel 参数，在密度曲线之间填充我们又可以得到热力图</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="dv-ggplot2.html#cb610-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span></span>
<span id="cb610-2"><a href="dv-ggplot2.html#cb610-2"></a><span class="st">  </span><span class="kw">stat_density_2d</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> <span class="kw">stat</span>(nlevel)), <span class="dt">geom =</span> <span class="st">&quot;polygon&quot;</span>) <span class="op">+</span></span>
<span id="cb610-3"><a href="dv-ggplot2.html#cb610-3"></a><span class="st">  </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>cut)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-36-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><code>gemo_hex</code> 也是二维密度图的一种变体，特别适合数据量比较大的情形</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="dv-ggplot2.html#cb611-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_hex</span>() <span class="op">+</span></span>
<span id="cb611-2"><a href="dv-ggplot2.html#cb611-2"></a><span class="st">  </span><span class="kw">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-37-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggplot2-rose" class="section level3">
<h3><span class="header-section-number">12.2.9</span> 玫瑰图</h3>
<p>南丁格尔风玫瑰图<a href="#fn44" class="footnote-ref" id="fnref44"><sup>44</sup></a> 可以作为堆积条形图，分组条形图</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="dv-ggplot2.html#cb612-1"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">fill =</span> clarity)) <span class="op">+</span></span>
<span id="cb612-2"><a href="dv-ggplot2.html#cb612-2"></a><span class="st">  </span><span class="kw">geom_bar</span>()</span>
<span id="cb612-3"><a href="dv-ggplot2.html#cb612-3"></a><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> color, <span class="dt">fill =</span> clarity)) <span class="op">+</span></span>
<span id="cb612-4"><a href="dv-ggplot2.html#cb612-4"></a><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span></span>
<span id="cb612-5"><a href="dv-ggplot2.html#cb612-5"></a><span class="st">  </span><span class="kw">coord_polar</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:stack-to-rose"></span>
<img src="dv-ggplot2_files/figure-html/stack-to-rose-1.png" alt="堆积条形图转风玫瑰图" width="70%" /><img src="dv-ggplot2_files/figure-html/stack-to-rose-2.png" alt="堆积条形图转风玫瑰图" width="70%" />
<p class="caption">
图 12.37: 堆积条形图转风玫瑰图
</p>
</div>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="dv-ggplot2.html#cb613-1"></a><span class="co"># 风玫瑰图 http://blog.csdn.net/Bone_ACE/article/details/47624987</span></span>
<span id="cb613-2"><a href="dv-ggplot2.html#cb613-2"></a><span class="kw">set.seed</span>(<span class="dv">2018</span>)</span>
<span id="cb613-3"><a href="dv-ggplot2.html#cb613-3"></a><span class="co"># 随机生成100次风向，并汇集到16个区间内</span></span>
<span id="cb613-4"><a href="dv-ggplot2.html#cb613-4"></a>direction &lt;-<span class="st"> </span><span class="kw">cut_interval</span>(<span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">360</span>), <span class="dt">n =</span> <span class="dv">16</span>)</span>
<span id="cb613-5"><a href="dv-ggplot2.html#cb613-5"></a><span class="co"># 随机生成100次风速，并划分成4种强度</span></span>
<span id="cb613-6"><a href="dv-ggplot2.html#cb613-6"></a>mag &lt;-<span class="st"> </span><span class="kw">cut_interval</span>(<span class="kw">rgamma</span>(<span class="dv">100</span>, <span class="dv">15</span>), <span class="dv">4</span>)</span>
<span id="cb613-7"><a href="dv-ggplot2.html#cb613-7"></a>dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">direction =</span> direction, <span class="dt">mag =</span> mag)</span>
<span id="cb613-8"><a href="dv-ggplot2.html#cb613-8"></a><span class="co"># 将风向映射到X轴，频数映射到Y轴，风速大小映射到填充色，生成条形图后再转为极坐标形式即可</span></span>
<span id="cb613-9"><a href="dv-ggplot2.html#cb613-9"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x =</span> direction, <span class="dt">y =</span> ..count.., <span class="dt">fill =</span> mag))</span>
<span id="cb613-10"><a href="dv-ggplot2.html#cb613-10"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">colour =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span></span>
<span id="cb613-11"><a href="dv-ggplot2.html#cb613-11"></a><span class="st">  </span><span class="kw">coord_polar</span>() <span class="op">+</span></span>
<span id="cb613-12"><a href="dv-ggplot2.html#cb613-12"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), <span class="dt">axis.text.y =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></span>
<span id="cb613-13"><a href="dv-ggplot2.html#cb613-13"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;Magnitude&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:wind-rose"></span>
<img src="dv-ggplot2_files/figure-html/wind-rose-1.png" alt="风玫瑰图" width="70%" />
<p class="caption">
图 12.38: 风玫瑰图
</p>
</div>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="dv-ggplot2.html#cb614-1"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>) <span class="op">+</span></span>
<span id="cb614-2"><a href="dv-ggplot2.html#cb614-2"></a><span class="st">  </span><span class="kw">coord_polar</span>() <span class="op">+</span></span>
<span id="cb614-3"><a href="dv-ggplot2.html#cb614-3"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(), <span class="dt">axis.text.y =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></span>
<span id="cb614-4"><a href="dv-ggplot2.html#cb614-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;Magnitude&quot;</span>)</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-38-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="ggplot2-wordcloud" class="section level3">
<h3><span class="header-section-number">12.2.10</span> 词云图</h3>
<p>词云 <a href="https://github.com/lepennec/ggwordcloud">ggwordcloud</a></p>
</div>
<div id="calendar-map" class="section level3">
<h3><span class="header-section-number">12.2.11</span> 日历图</h3>
<p>这是 heatmap 的变种</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="dv-ggplot2.html#cb615-1"></a><span class="co"># 这个图和 Github 的打码图一样的</span></span>
<span id="cb615-2"><a href="dv-ggplot2.html#cb615-2"></a><span class="co"># 展示每日变化情况</span></span>
<span id="cb615-3"><a href="dv-ggplot2.html#cb615-3"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb615-4"><a href="dv-ggplot2.html#cb615-4"></a><span class="kw">library</span>(ggthemes)</span>
<span id="cb615-5"><a href="dv-ggplot2.html#cb615-5"></a><span class="kw">library</span>(data.table)</span>
<span id="cb615-6"><a href="dv-ggplot2.html#cb615-6"></a></span>
<span id="cb615-7"><a href="dv-ggplot2.html#cb615-7"></a>week.abb &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Mon&quot;</span>, <span class="st">&quot;Tue&quot;</span>, <span class="st">&quot;Wed&quot;</span>, <span class="st">&quot;Thu&quot;</span>, <span class="st">&quot;Fri&quot;</span>, <span class="st">&quot;Sat&quot;</span>, <span class="st">&quot;Sun&quot;</span>)</span>
<span id="cb615-8"><a href="dv-ggplot2.html#cb615-8"></a>month.abb &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb615-9"><a href="dv-ggplot2.html#cb615-9"></a>  <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jun&quot;</span>,</span>
<span id="cb615-10"><a href="dv-ggplot2.html#cb615-10"></a>  <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Sep&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Dec&quot;</span></span>
<span id="cb615-11"><a href="dv-ggplot2.html#cb615-11"></a>)</span>
<span id="cb615-12"><a href="dv-ggplot2.html#cb615-12"></a></span>
<span id="cb615-13"><a href="dv-ggplot2.html#cb615-13"></a>rides &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">date =</span> <span class="kw">seq.Date</span>(</span>
<span id="cb615-14"><a href="dv-ggplot2.html#cb615-14"></a>  <span class="dt">from =</span> <span class="kw">as.Date</span>(<span class="st">&quot;2016-04-04&quot;</span>),</span>
<span id="cb615-15"><a href="dv-ggplot2.html#cb615-15"></a>  <span class="dt">to =</span> <span class="kw">as.Date</span>(<span class="st">&quot;2019-11-09&quot;</span>), <span class="dt">by =</span> <span class="st">&quot;day&quot;</span></span>
<span id="cb615-16"><a href="dv-ggplot2.html#cb615-16"></a>))</span>
<span id="cb615-17"><a href="dv-ggplot2.html#cb615-17"></a></span>
<span id="cb615-18"><a href="dv-ggplot2.html#cb615-18"></a>rides<span class="op">$</span>year &lt;-<span class="st"> </span><span class="kw">year</span>(rides<span class="op">$</span>date)</span>
<span id="cb615-19"><a href="dv-ggplot2.html#cb615-19"></a>rides<span class="op">$</span>week &lt;-<span class="st"> </span><span class="kw">week</span>(rides<span class="op">$</span>date)</span>
<span id="cb615-20"><a href="dv-ggplot2.html#cb615-20"></a>rides<span class="op">$</span>weekdays &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">wday</span>(rides<span class="op">$</span>date), <span class="dt">labels =</span> week.abb)</span>
<span id="cb615-21"><a href="dv-ggplot2.html#cb615-21"></a>rides<span class="op">$</span>N &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">40</span>, <span class="kw">dim</span>(rides)[<span class="dv">1</span>], <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="cb615-22"><a href="dv-ggplot2.html#cb615-22"></a></span>
<span id="cb615-23"><a href="dv-ggplot2.html#cb615-23"></a><span class="kw">ggplot</span>(rides, <span class="kw">aes</span>(<span class="dt">x =</span> week, <span class="dt">y =</span> weekdays, <span class="dt">fill =</span> N)) <span class="op">+</span></span>
<span id="cb615-24"><a href="dv-ggplot2.html#cb615-24"></a><span class="st">  </span><span class="kw">scale_fill_viridis_c</span>(<span class="dt">name =</span> <span class="st">&quot;Divvy Rides&quot;</span>, <span class="dt">option =</span> <span class="st">&quot;C&quot;</span>, <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="kw">max</span>(rides<span class="op">$</span>N))) <span class="op">+</span></span>
<span id="cb615-25"><a href="dv-ggplot2.html#cb615-25"></a><span class="st">  </span><span class="kw">geom_tile</span>(<span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">size =</span> <span class="fl">0.4</span>) <span class="op">+</span></span>
<span id="cb615-26"><a href="dv-ggplot2.html#cb615-26"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="st">&quot;year&quot;</span>, <span class="dt">ncol =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb615-27"><a href="dv-ggplot2.html#cb615-27"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">52</span>, <span class="dt">length =</span> <span class="dv">12</span>), <span class="dt">labels =</span> month.abb) <span class="op">+</span></span>
<span id="cb615-28"><a href="dv-ggplot2.html#cb615-28"></a><span class="st">  </span><span class="kw">theme_tufte</span>()</span></code></pre></div>
<p><img src="dv-ggplot2_files/figure-html/unnamed-chunk-39-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="ggplot2-session-info" class="section level2">
<h2><span class="header-section-number">12.3</span> 运行环境</h2>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="dv-ggplot2.html#cb616-1"></a>xfun<span class="op">::</span><span class="kw">session_info</span>(</span>
<span id="cb616-2"><a href="dv-ggplot2.html#cb616-2"></a>  <span class="dt">packages =</span> <span class="kw">c</span>(</span>
<span id="cb616-3"><a href="dv-ggplot2.html#cb616-3"></a>    <span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;magrittr&quot;</span>, <span class="st">&quot;colorspace&quot;</span>,</span>
<span id="cb616-4"><a href="dv-ggplot2.html#cb616-4"></a>    <span class="st">&quot;nlme&quot;</span>, <span class="st">&quot;mgcv&quot;</span>, <span class="st">&quot;ggbeeswarm&quot;</span>, <span class="st">&quot;ggridges&quot;</span>, <span class="st">&quot;hexbin&quot;</span></span>
<span id="cb616-5"><a href="dv-ggplot2.html#cb616-5"></a>  )</span>
<span id="cb616-6"><a href="dv-ggplot2.html#cb616-6"></a>)</span>
<span id="cb616-7"><a href="dv-ggplot2.html#cb616-7"></a><span class="co">#&gt; R Under development (unstable) (2020-03-10 r77920)</span></span>
<span id="cb616-8"><a href="dv-ggplot2.html#cb616-8"></a><span class="co">#&gt; Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span id="cb616-9"><a href="dv-ggplot2.html#cb616-9"></a><span class="co">#&gt; Running under: Ubuntu 16.04.6 LTS</span></span>
<span id="cb616-10"><a href="dv-ggplot2.html#cb616-10"></a><span class="co">#&gt; </span></span>
<span id="cb616-11"><a href="dv-ggplot2.html#cb616-11"></a><span class="co">#&gt; Locale:</span></span>
<span id="cb616-12"><a href="dv-ggplot2.html#cb616-12"></a><span class="co">#&gt;   LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              </span></span>
<span id="cb616-13"><a href="dv-ggplot2.html#cb616-13"></a><span class="co">#&gt;   LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    </span></span>
<span id="cb616-14"><a href="dv-ggplot2.html#cb616-14"></a><span class="co">#&gt;   LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   </span></span>
<span id="cb616-15"><a href="dv-ggplot2.html#cb616-15"></a><span class="co">#&gt;   LC_PAPER=en_US.UTF-8       LC_NAME=C                 </span></span>
<span id="cb616-16"><a href="dv-ggplot2.html#cb616-16"></a><span class="co">#&gt;   LC_ADDRESS=C               LC_TELEPHONE=C            </span></span>
<span id="cb616-17"><a href="dv-ggplot2.html#cb616-17"></a><span class="co">#&gt;   LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       </span></span>
<span id="cb616-18"><a href="dv-ggplot2.html#cb616-18"></a><span class="co">#&gt; </span></span>
<span id="cb616-19"><a href="dv-ggplot2.html#cb616-19"></a><span class="co">#&gt; Package version:</span></span>
<span id="cb616-20"><a href="dv-ggplot2.html#cb616-20"></a><span class="co">#&gt;   assertthat_0.2.1   backports_1.1.5    beeswarm_0.2.3    </span></span>
<span id="cb616-21"><a href="dv-ggplot2.html#cb616-21"></a><span class="co">#&gt;   callr_3.4.2        cli_2.0.2          colorspace_1.4-1  </span></span>
<span id="cb616-22"><a href="dv-ggplot2.html#cb616-22"></a><span class="co">#&gt;   crayon_1.3.4       desc_1.2.0         digest_0.6.25     </span></span>
<span id="cb616-23"><a href="dv-ggplot2.html#cb616-23"></a><span class="co">#&gt;   ellipsis_0.3.0     evaluate_0.14      fansi_0.4.1       </span></span>
<span id="cb616-24"><a href="dv-ggplot2.html#cb616-24"></a><span class="co">#&gt;   farver_2.0.3       ggbeeswarm_0.6.0   ggplot2_3.3.0     </span></span>
<span id="cb616-25"><a href="dv-ggplot2.html#cb616-25"></a><span class="co">#&gt;   ggridges_0.5.2     glue_1.3.1         graphics_4.0.0    </span></span>
<span id="cb616-26"><a href="dv-ggplot2.html#cb616-26"></a><span class="co">#&gt;   grDevices_4.0.0    grid_4.0.0         gtable_0.3.0      </span></span>
<span id="cb616-27"><a href="dv-ggplot2.html#cb616-27"></a><span class="co">#&gt;   hexbin_1.28.1      isoband_0.2.0      labeling_0.3      </span></span>
<span id="cb616-28"><a href="dv-ggplot2.html#cb616-28"></a><span class="co">#&gt;   lattice_0.20.40    lifecycle_0.2.0    magrittr_1.5      </span></span>
<span id="cb616-29"><a href="dv-ggplot2.html#cb616-29"></a><span class="co">#&gt;   MASS_7.3.51.5      Matrix_1.2.18      methods_4.0.0     </span></span>
<span id="cb616-30"><a href="dv-ggplot2.html#cb616-30"></a><span class="co">#&gt;   mgcv_1.8-31        munsell_0.5.0      nlme_3.1-145      </span></span>
<span id="cb616-31"><a href="dv-ggplot2.html#cb616-31"></a><span class="co">#&gt;   pillar_1.4.3       pkgbuild_1.0.6     pkgconfig_2.0.3   </span></span>
<span id="cb616-32"><a href="dv-ggplot2.html#cb616-32"></a><span class="co">#&gt;   pkgload_1.0.2      plyr_1.8.6         praise_1.0.0      </span></span>
<span id="cb616-33"><a href="dv-ggplot2.html#cb616-33"></a><span class="co">#&gt;   prettyunits_1.1.1  processx_3.4.2     ps_1.3.2          </span></span>
<span id="cb616-34"><a href="dv-ggplot2.html#cb616-34"></a><span class="co">#&gt;   R6_2.4.1           RColorBrewer_1.1.2 Rcpp_1.0.3        </span></span>
<span id="cb616-35"><a href="dv-ggplot2.html#cb616-35"></a><span class="co">#&gt;   rlang_0.4.5        rprojroot_1.3.2    rstudioapi_0.11   </span></span>
<span id="cb616-36"><a href="dv-ggplot2.html#cb616-36"></a><span class="co">#&gt;   scales_1.1.0       splines_4.0.0      stats_4.0.0       </span></span>
<span id="cb616-37"><a href="dv-ggplot2.html#cb616-37"></a><span class="co">#&gt;   testthat_2.3.2     tibble_2.1.3       tools_4.0.0       </span></span>
<span id="cb616-38"><a href="dv-ggplot2.html#cb616-38"></a><span class="co">#&gt;   utf8_1.1.4         utils_4.0.0        vctrs_0.2.4       </span></span>
<span id="cb616-39"><a href="dv-ggplot2.html#cb616-39"></a><span class="co">#&gt;   vipor_0.4.5        viridisLite_0.3.0  withr_2.1.2</span></span></code></pre></div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="39">
<li id="fn39"><p><a href="https://stat.ethz.ch/pipermail/r-help/2007-October/142420.html" class="uri">https://stat.ethz.ch/pipermail/r-help/2007-October/142420.html</a><a href="dv-ggplot2.html#fnref39" class="footnote-back">↩︎</a></p></li>
<li id="fn40"><p><a href="http://varianceexplained.org/r/why-I-use-ggplot2/" class="uri">http://varianceexplained.org/r/why-I-use-ggplot2/</a><a href="dv-ggplot2.html#fnref40" class="footnote-back">↩︎</a></p></li>
<li id="fn41"><p><a href="https://simplystatistics.org/2016/02/11/why-i-dont-use-ggplot2/" class="uri">https://simplystatistics.org/2016/02/11/why-i-dont-use-ggplot2/</a><a href="dv-ggplot2.html#fnref41" class="footnote-back">↩︎</a></p></li>
<li id="fn42"><p><a href="https://github.com/ricardo-bion/medium_visualization" class="uri">https://github.com/ricardo-bion/medium_visualization</a><a href="dv-ggplot2.html#fnref42" class="footnote-back">↩︎</a></p></li>
<li id="fn43"><p><a href="https://leonawicz.github.io/" class="uri">https://leonawicz.github.io/</a><a href="dv-ggplot2.html#fnref43" class="footnote-back">↩︎</a></p></li>
<li id="fn44"><p><a href="https://mbostock.github.io/protovis/ex/crimea-rose-full.html" class="uri">https://mbostock.github.io/protovis/ex/crimea-rose-full.html</a><a href="dv-ggplot2.html#fnref44" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>
window.onload = function() {

  var imgs = document.querySelectorAll('img');

  // Upon clicking an image, open a new window with the
  // dimensions of the image, pointing the `data-url` link
  var on_click = function (e) {
    var d = e.target.dataset || {};
    if (d.url) {
      // Add some extra height for the modebar
      var height = 'height=' + (e.target.clientHeight * 1.05);
      var width = 'width=' + e.target.clientWidth;
      var param = 'location=yes,' + height + ',' + width + ',scrollbars=yes,status=yes';
      window.open(e.target.dataset.url, '_blank', param);
    }
  };

  var on_hover = function (e) {
    var d = e.target.dataset || {};
    if (d.url) {
      e.target.style.cursor = 'pointer';
    }
  };

  for (var i = 0; i < imgs.length; i++) {
    imgs[i].addEventListener('click', on_click);
    imgs[i].addEventListener('mouseover', on_hover);
  }
};
</script>
            </section>

          </div>
        </div>
      </div>
<a href="dv-plot.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dv-plot3d.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/XiangyunHuang/RGraphics/edit/master/dv-ggplot2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub", "_main.mobi", "https://github.com/XiangyunHuang/RGraphics/raw/master/dv-ggplot2.Rmd"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
